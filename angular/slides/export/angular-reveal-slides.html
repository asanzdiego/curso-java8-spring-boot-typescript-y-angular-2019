<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="generator" content="pandoc">
  <meta name="description" content="Angular" />
  <meta name="author" content="Adolfo Sanz De Diego">
  <title>Angular</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../lib/reveal.js/css/reveal.css">
  <link rel="stylesheet" href="../lib/reveal.js-menu/menu.css">
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link rel="stylesheet" href="../lib/reveal.js/css/theme/beige.css" id="theme">

	<!-- For syntax highlighting -->
	<link rel="stylesheet" href="../lib/reveal.js/lib/css/zenburn.css">

  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? '../lib/reveal.js/css/print/pdf.css' : '../lib/reveal.js/css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>

  <style type="text/css">
    body {
      background: white !important;
      background-color: white !important;
    }
    code{
      white-space: pre;
    }
    .reveal pre code {
      background: rgba(255, 255, 255, 0.7);
      color: rgba(0, 0, 0, 0.7);
    }
    .reveal section img {
      margin: 15px 0px;
      padding: 15px;
      background: rgba(255, 255, 255, 0.9);
    }
    strong {
      color: #777
    }
    a:hover {
      text-decoration: underline !important;
    }
    h1.title {
      font-size: 200% !important;
    }
    h1 {
      font-size: 200% !important;
    }
    h2 {
      font-size: 150% !important;
    }
    h3 {
      font-size: 100% !important;
    }
    @media print {
      #only-print-parent { display: table !important; }
      #only-print-child { display: table-cell !important; vertical-align: middle;}
      h1.title { font-size: 300% !important;}
      h1 { font-size: 300% !important; }
      h2 { font-size: 200% !important; }
      h3 { font-size: 150% !important; }
    }
  </style>
  <!--[if lt IE 9]>
  <script src="../lib/reveal.js/lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="only-print-parent">
    <div id="only-print-child">
      <h1 class="title">Angular</h2>
      <h2 class="author">Adolfo Sanz De Diego</h2>
      <h3 class="date">Pronoide</h3>
    </div>
</section>

<section><section id="acerca-de" class="titleslide slide level1"><h1><span class="header-section-number">2</span> Acerca de</h1></section><section id="autor" class="slide level2">
<h2><span class="header-section-number">2.1</span> Autor</h2>
<ul>
<li><strong>Adolfo Sanz De Diego</strong>
<ul>
<li>Blog: <a href="http://asanzdiego.blogspot.com.es/">asanzdiego.blogspot.com.es</a></li>
<li>Correo: <a href="mailto:asanzdiego@gmail.com">asanzdiego@gmail.com</a></li>
<li>GitHub: <a href="http://github.com/asanzdiego">github.com/asanzdiego</a></li>
<li>Twitter: <a href="http://twitter.com/asanzdiego">twitter.com/asanzdiego</a></li>
<li>LinkedIn: <a href="http://www.linkedin.com/in/asanzdiego">in/asanzdiego</a></li>
<li>SlideShare: <a href="http://www.slideshare.net/asanzdiego/">slideshare.net/asanzdiego</a></li>
</ul></li>
</ul>
</section><section id="licencia" class="slide level2">
<h2><span class="header-section-number">2.2</span> Licencia</h2>
<ul>
<li><strong>Esta obra está bajo una licencia:</strong>
<ul>
<li><a href="http://creativecommons.org/licenses/by-sa/3.0/es/">Creative Commons Reconocimiento-CompartirIgual 3.0</a></li>
</ul></li>
</ul>
</section></section>
<section><section id="introducción" class="titleslide slide level1"><h1><span class="header-section-number">3</span> Introducción</h1></section><section id="angular" class="slide level2">
<h2><span class="header-section-number">3.1</span> Angular</h2>
<ul>
<li><p>Framework de código abierto respaldado por Google, ayuda con la construcción de las <strong>Single Page Applications</strong>.</p></li>
<li><p>El patrón Single Page Applications define que podemos construir o desarrollar aplicaciones web en una única página html.</p></li>
<li><p>Aparte, sigue el patrón <strong>Modelo Vista Controlador (MVC)</strong>.</p></li>
</ul>
</section><section id="características" class="slide level2">
<h2><span class="header-section-number">3.2</span> Características</h2>
<ul>
<li><p><strong>Multiplataforma</strong>: Una aplicación en Angular funciona en dispositivos móviles y de escritorio.</p></li>
<li><p><strong>Desarrollo Móvil</strong>: El desarrollo de aplicaciones de escritorio es mucho más fácil cuando primero se manejan los problemas de rendimiento en el desarrollo móvil.</p></li>
<li><p><strong>Modularidad</strong>: Para desarrollar una nueva funcionalidad esta se empaqueta en un módulo, produciendo un núcleo más ligero y más rápido.</p></li>
<li><p><strong>Compatibilidad</strong>: Es compatible con los navegadores más modernos y recientes.</p></li>
</ul>
</section><section id="lenguaje" class="slide level2">
<h2><span class="header-section-number">3.3</span> Lenguaje</h2>
<ul>
<li><p><strong>Angular recomienda usar TypeScript</strong> un lenguaje de programación libre y de código abierto desarrollado y mantenido por Microsoft, considerado como un superconjunto de JavaScript actualizado, que esencialmente añade tipado estático y objetos basados en clases.</p></li>
<li><p>TypeScript no es ni mucho menos obligatorio. Se puede desarrollar en ES5 y ES6 sin problemas. Pero el conjunto de herramientas, la recomendación de la plataforma y la gran ventaja de la programación orientada a objetos, hace de TypeScript la mejor elección.</p></li>
</ul>
</section><section id="librerías-y-herramientas" class="slide level2">
<h2><span class="header-section-number">3.4</span> Librerías y herramientas</h2>
<ul>
<li>Para poder empezar con Angular dos vamos a necesitar <strong>Node</strong> y su manejador de paquetes <strong>npm</strong>.</li>
</ul>
<p><a href="https://nodejs.org/es/" class="uri">https://nodejs.org/es/</a></p>
</section><section id="editores" class="slide level2">
<h2><span class="header-section-number">3.5</span> Editores</h2>
<ul>
<li><p>Podemos usar cualquier editor de texto, aunque es recomendable alguno que nos de soporte al lenguaje que utilicemos.</p></li>
<li><p>Está muy bien <a href="https://code.visualstudio.com/download">VSCode</a> instalando varias <a href="https://www.asanzdiego.com/2019/05/plugins-de-visual-studio-code-para-desarrollar-con-angular-y-spring-boot.html">extensiones para programar con Angular</a>.</p></li>
</ul>
</section><section id="arquitectura" class="slide level2">
<h2><span class="header-section-number">3.6</span> Arquitectura</h2>
<ul>
<li>Las partes fundamentales de una aplicación en Angular son:
<ul>
<li>Módulos</li>
<li>Components</li>
<li>Plantillas</li>
<li>Servicios</li>
<li>Inyección de dependencias</li>
<li>Directivas</li>
<li>Data binding</li>
</ul></li>
</ul>
</section><section id="recursos" class="slide level2">
<h2><span class="header-section-number">3.7</span> Recursos</h2>
<ul>
<li>Documentación oficial: <a href="https://angular.io/">angular.io</a></li>
<li>Colección curada de recursos: <a href="https://angularclass.github.io/awesome-angular2/">awesome Angular</a></li>
<li>Material Design en Angular: <a href="https://material.angular.io/">angular.io</a></li>
</ul>
</section></section>
<section><section id="hola-mundo-a-mano" class="titleslide slide level1"><h1><span class="header-section-number">4</span> Hola mundo a mano</h1></section><section id="instalación-de-herramientas" class="slide level2">
<h2><span class="header-section-number">4.1</span> Instalación de herramientas</h2>
<ul>
<li><p>Como hemos visto, para poder ejecutar Angular necesitamos Node y npm. La manera mas sencilla de empezar es descargarnos e instalar la distribución para nuestro sistema operativo de <a href="https://nodejs.org/en/download/">Node</a>, que viene ya con su manejador de paquetes npm.</p></li>
<li><p>Una vez instalado y para comprobar que todo ha ido bien:</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">node</span> -v
$ <span class="ex">npm</span> -v</code></pre></div>
</section><section id="creación-de-contenido" class="slide level2">
<h2><span class="header-section-number">4.2</span> Creación de contenido</h2>
<ul>
<li>Primero creamos una carpeta dónde añadiremos todos los recursos necesarios para nuestro proyecto. Dentro de ella necesitaremos:
<ul>
<li><strong>package.json</strong>: Identifica las dependencias de paquetes npm para el proyecto.</li>
<li><strong>tsconfig.json</strong>: Define la configuración de TypeScript y como compilará los archivos a JavaScript.</li>
<li><strong>systemjs.config.js</strong>: Proporcionará la configuración de cómo serán cargados los módulos del proyecto.</li>
</ul></li>
</ul>
</section><section id="instalación-de-paquetes" class="slide level2">
<h2><span class="header-section-number">4.3</span> Instalación de paquetes</h2>
<ul>
<li>Para instalar todos los paquetes necesarios, desde consola ejecutamos:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">npm</span> install</code></pre></div>
<ul>
<li>Esto descargará todos los paquetes descritos en los archivos de configuración que hemos creado antes. Al terminar, tendremos una carpeta llamada <strong>node_modules</strong> adicional a esta carpeta, crearemos una nueva llamada <strong>app</strong>, nos quedarán las siguientes carpetas.</li>
</ul>
</section><section id="componentes-i" class="slide level2">
<h2><span class="header-section-number">4.4</span> Componentes (I)</h2>
<ul>
<li>Dentro de la carpeta <strong>app</strong> crearemos el archivo llamado <strong>app.component.ts</strong> con el siguiente contenido.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
<span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;my-app&#39;</span><span class="op">,</span> <span class="co">// elemento html consumidor</span>
<span class="dt">template</span><span class="op">:</span> <span class="st">&#39;&lt;h1&gt;Hello Angular!&lt;/h1&gt;&#39;</span> <span class="co">//vista html que se renderizará</span>
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> AppComponent <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="componentes-ii" class="slide level2">
<h2><span class="header-section-number">4.5</span> Componentes (II)</h2>
<ul>
<li><p>Los componentes son los bloques de construcción de Angular que representan regiones de la pantalla.</p></li>
<li><p>Las aplicaciones se definen como árboles de componentes.</p></li>
</ul>
</section><section id="componentes-iii" class="slide level2">
<h2><span class="header-section-number">4.6</span> Componentes (III)</h2>
<ul>
<li>Cada componente a su vez está formado por tres partes:
<ul>
<li>La <strong>vista</strong>: es el código que se renderizará para los usuarios. Esta plantilla también puede estar en un fichero de extensión .html.</li>
<li>La <strong>clase controladora</strong>: En TS usaremos clases para declarar los controladores que exponen datos y funcionalidad a la vista.</li>
<li><strong>Metadata</strong>: Se declara como un decorador, una función especial de TypeScript, que recibe un objeto de configuración. Esto acompaña al controlador en un fichero de extensión .ts</li>
</ul></li>
</ul>
</section><section id="componentes-iv" class="slide level2">
<h2><span class="header-section-number">4.7</span> Componentes (IV)</h2>
<ul>
<li><strong><span class="citation" data-cites="Component">@Component</span>({...​})</strong> Lo que hace es asociar al controlador una plantilla HTML y un selector para ser invocado desde otra vista <my-app></my-app>.</li>
</ul>
</section><section id="app.module.ts-i" class="slide level2">
<h2><span class="header-section-number">4.8</span> app.module.ts (I)</h2>
<ul>
<li><p>Todas las aplicaciones en Angular requieren mínimo de un módulo, dentro de la carpeta <strong>app</strong> crearemos un archivo llamado <strong>app.module.ts</strong> con el siguiente contenido.</p></li>
<li><p>Un módulo no es más que una clase contenedora. Cada módulo puede incluir múltiples componentes y servicios. Normalmente un módulo dependerá de otros.</p></li>
</ul>
</section><section id="app.module.ts-ii" class="slide level2">
<h2><span class="header-section-number">4.9</span> app.module.ts (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> NgModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> BrowserModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser&#39;</span><span class="op">;</span>

<span class="im">import</span> <span class="op">{</span> AppComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.component&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
<span class="dt">imports</span><span class="op">:</span> [ BrowserModule ]<span class="op">,</span>
<span class="dt">declarations</span><span class="op">:</span> [ AppComponent ]<span class="op">,</span>
<span class="dt">bootstrap</span><span class="op">:</span> [ AppComponent ] <span class="co">// componente raíz para el arranque</span>
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="main.ts" class="slide level2">
<h2><span class="header-section-number">4.10</span> main.ts</h2>
<ul>
<li>En la carpeta <strong>app</strong> creamos un nuevo archivo llamado <strong>main.ts</strong> con el siguiente código.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> platformBrowserDynamic <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser-dynamic&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> AppModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.module&#39;</span><span class="op">;</span>

<span class="at">platformBrowserDynamic</span>().<span class="at">bootstrapModule</span>(AppModule)<span class="op">;</span></code></pre></div>
</section><section id="index.html" class="slide level2">
<h2><span class="header-section-number">4.11</span> index.html</h2>
<ul>
<li>Fuera de la carpeta <strong>app</strong> creamos también el archivo <strong>index.html</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;html&gt;</span>
  <span class="kw">&lt;head&gt;</span>
    <span class="kw">&lt;title&gt;</span>Angular QuickStart<span class="kw">&lt;/title&gt;</span>
    <span class="kw">&lt;meta</span><span class="ot"> charset=</span><span class="st">&quot;UTF-8&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;meta</span><span class="ot"> name=</span><span class="st">&quot;viewport&quot;</span><span class="ot"> content=</span><span class="st">&quot;width=device-width, initial-scale=1&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;node_modules/core-js/client/shim.min.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
    ...
    <span class="kw">&lt;script</span><span class="ot"> src=</span><span class="st">&quot;systemjs.config.js&quot;</span><span class="kw">&gt;&lt;/script&gt;</span>
    <span class="kw">&lt;script&gt;</span>
    <span class="va">System</span>.<span class="at">import</span>(<span class="st">&#39;app/main.js&#39;</span>).<span class="at">catch</span>(<span class="kw">function</span>(err)<span class="op">{</span> <span class="va">console</span>.<span class="at">error</span>(err)<span class="op">;</span> <span class="op">}</span>)<span class="op">;</span>
    <span class="kw">&lt;/script&gt;</span>
  <span class="kw">&lt;/head&gt;</span>
  <span class="kw">&lt;body&gt;</span>
    <span class="kw">&lt;my-app&gt;</span>Loading...<span class="kw">&lt;/my-app&gt;</span>
  <span class="kw">&lt;/body&gt;</span>
<span class="kw">&lt;/html&gt;</span></code></pre></div>
</section><section id="ejecución" class="slide level2">
<h2><span class="header-section-number">4.12</span> Ejecución</h2>
<ul>
<li>Ahora ejecutaremos nuestro proyecto con el comando npm start</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">npm</span> start</code></pre></div>
<ul>
<li>Al momento de ejecutarlo en nuestra carpeta se crearán archivos JavaScript que fueron compilados de nuestros archivos TypeScript. Después se nos abrirá una ventana en el navegador con la dirección <a href="http://localhost:3000/" class="uri">http://localhost:3000/</a> y toda nuestra aplicación en Angular cargada.</li>
</ul>
</section></section>
<section><section id="angular-cli" class="titleslide slide level1"><h1><span class="header-section-number">5</span> Angular-cli</h1></section><section id="introducción-1" class="slide level2">
<h2><span class="header-section-number">5.1</span> Introducción</h2>
<ul>
<li><p>Angular CLI es el intérprete de línea de comandos de Angular, facilita el inicio de proyectos y la creación del esqueleto, o scaffolding, de la mayoría de los componentes de una aplicación Angular.</p></li>
<li><p>Angular CLI no es una herramienta de terceros, sino que nos la ofrece el propio equipo de Angular.</p></li>
</ul>
</section><section id="características-1" class="slide level2">
<h2><span class="header-section-number">5.2</span> Características</h2>
<ul>
<li><p>Nos facilita mucho el proceso de inicio de cualquier aplicación con Angular, ya que en pocos minutos te ofrece el esqueleto de archivos y carpetas que vas a necesitar, junto con una cantidad de herramientas ya configuradas.</p></li>
<li><p>Además, durante la etapa de desarrollo nos ofrecerá muchas ayudas, generando el &quot;scaffolding&quot; de muchos de los componentes de una aplicación.</p></li>
<li><p>Durante la etapa de producción o testing también nos ayudará, permitiendo preparar los archivos que deben ser subidos al servidor, transpilar las fuentes, etc.</p></li>
</ul>
</section><section id="instalación" class="slide level2">
<h2><span class="header-section-number">5.3</span> Instalación</h2>
<ul>
<li><p>Igual que si lo hacemos a mano, necesitamos tener Node y npm instalados. La manera mas sencilla de empezar es descargarnos e instalar la distribución para nuestro sistema operativo de <a href="https://nodejs.org/en/download/">Node</a>, que viene ya con su manejador de paquetes npm.</p></li>
<li><p>Para instalar Angular cli, desde la terminal. Una vez instalado, desde la línea de comandos podremos usar el comando <strong>ng</strong>.</p></li>
<li><p>Para comprobar que todo ha ido bien, ejecutamos <strong>ng -v</strong>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">npm</span> install -g @angular/cli
$ <span class="ex">ng</span> -v</code></pre></div>
</section><section id="creación-de-contenido-1" class="slide level2">
<h2><span class="header-section-number">5.4</span> Creación de contenido</h2>
<ul>
<li>Creamos un directorio para nuestra aplicación y ejecutamos lo siguiente:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> new hola-angular</code></pre></div>
<ul>
<li><p>Después de unos segundos tendremos nuestro proyecto creado y listo para ejecutarse.</p></li>
<li><p>Angular cli nos crea un proyecto bastante mas grande que si lo hacemos nosotros a mano, además añade test, pero en general es el mismo proyecto de Angular.</p></li>
</ul>
</section><section id="ejecución-1" class="slide level2">
<h2><span class="header-section-number">5.5</span> Ejecución</h2>
<ul>
<li><p>Para lanzar y probar tu aplicación necesitas otro comando de Angular-CLI.</p></li>
<li><p>Este comando se ocupa entre otras cosas de todo el proceso necesario para transformar el código TypeScript en JavaScript reconocible por el navegador.</p></li>
<li><p>También crea un mini servidor estático y además refresca el navegador a cada cambio los fuentes.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> serve</code></pre></div>
</section><section id="otros-comandos-i" class="slide level2">
<h2><span class="header-section-number">5.6</span> Otros comandos (I)</h2>
<p><strong>Crear un componente:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g component nombre-componente</code></pre></div>
<p><strong>Crear una directiva:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g directive nombre-directiva</code></pre></div>
</section><section id="otros-comandos-ii" class="slide level2">
<h2><span class="header-section-number">5.7</span> Otros comandos (II)</h2>
<p><strong>Crear un pipe:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g pipe nombre-pipe</code></pre></div>
<p><strong>Crear un servicio:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g service nombre-servicio</code></pre></div>
</section><section id="otros-comandos-iii" class="slide level2">
<h2><span class="header-section-number">5.8</span> Otros comandos (III)</h2>
<p><strong>Crear un interface:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g interace nombre-interface</code></pre></div>
<p><strong>Crear una clase:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g class nombre-clase</code></pre></div>
</section><section id="otros-comandos-iv" class="slide level2">
<h2><span class="header-section-number">5.9</span> Otros comandos (IV)</h2>
<p><strong>Crear un enum:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g enum nombre-enum</code></pre></div>
<p><strong>Crear un módulo:</strong></p>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g module nombre-module</code></pre></div>
</section><section id="otros-comandos-v" class="slide level2">
<h2><span class="header-section-number">5.10</span> Otros comandos (V)</h2>
<p>A esos comandos les podemos añadir las siguientes opciones:</p>
<ul>
<li><p><strong>-it</strong>: no genera archivo de plantilla.</p></li>
<li><p><strong>-is</strong>: no genera archivo de estilos.</p></li>
<li><p><strong>--flat</strong>: genera los archivos en la carpeta actual en lugar de en una nueva carpeta.</p></li>
</ul>
</section><section id="estructura-del-proyecto-i" class="slide level2">
<h2><span class="header-section-number">5.11</span> Estructura del proyecto (I)</h2>
<ul>
<li><p><strong>e2e</strong>: aquí se encuentran los archivos de testing End to End, que se ejecutan con la ayuda de Protractor y Jasmine.</p></li>
<li><p><strong>node_modules</strong>: aquí se encuentran todas las dependencias de nuestro proyecto.</p></li>
<li><p><strong>src</strong>: es posiblemente la carpeta más importante del proyecto, aquí se encuentra todo el código de la aplicación, y es en la carpeta que pasaremos la mayor parte del tiempo.</p></li>
</ul>
</section><section id="estructura-del-proyecto-ii" class="slide level2">
<h2><span class="header-section-number">5.12</span> Estructura del proyecto (II)</h2>
<ul>
<li><p><strong>app</strong>: en esta carpeta vamos a tener todos los componentes, servicios, plantillas y resto de elementos de la aplicación.</p></li>
<li><p><strong>app.module.ts</strong>: este archivo se encarga de entender que componentes y dependencias tenemos en el proyecto.</p></li>
<li><p><strong>assets</strong>: aquí guardaremos los assets que no pertenezcan a los componentes de Angular, como imágenes, sonidos...​</p></li>
</ul>
</section><section id="estructura-del-proyecto-iii" class="slide level2">
<h2><span class="header-section-number">5.13</span> Estructura del proyecto (III)</h2>
<ul>
<li><p><strong>environments</strong>: en esta carpeta tendremos los archivos encargados de indicar los entornos de trabajo (producción, desarrollo...​).</p></li>
<li><p><strong>index.html</strong>: este es el archivo donde se inicia la SPA, donde se van a cargar los componentes.</p></li>
<li><p><strong>main.ts</strong>: es el primer archivo en ejecutarse, y en el se encuentran los parámetros de configuración de la aplicación y del entorno en el que trabajaremos...​</p></li>
</ul>
</section><section id="estructura-del-proyecto-iv" class="slide level2">
<h2><span class="header-section-number">5.14</span> Estructura del proyecto (IV)</h2>
<ul>
<li><p><strong>polyfills.ts</strong>: asegura la compatibilidad con los distintos navegadores.</p></li>
<li><p><strong>styles.css</strong>: aquí definimos los estilos globales que vamos a darle a la aplicación.</p></li>
<li><p><strong>test.ts</strong>: es el punto de entrada a los test unitarios, los haremos con Jasmine.</p></li>
</ul>
</section><section id="estructura-del-proyecto-v" class="slide level2">
<h2><span class="header-section-number">5.15</span> Estructura del proyecto (V)</h2>
<ul>
<li><p><strong>angular-cli.json</strong>: aquí se encuentra la configuración de Angular-CLI.</p></li>
<li><p><strong>tsconfig.json</strong>: en este archivo se encuentra la configuración de TypeScript, donde se indica como hacer la compilación a JavaScript.</p></li>
<li><p><strong>karma.conf.js</strong>: aquí se encuentra la configuración de los test unitarios.</p></li>
</ul>
</section><section id="estructura-del-proyecto-vi" class="slide level2">
<h2><span class="header-section-number">5.16</span> Estructura del proyecto (VI)</h2>
<ul>
<li><p><strong>package.json</strong>: aquí se indican las dependencias del proyecto, las acciones a ejecutar cuando se lanza el proyecto, y alguna información del proyecto.</p></li>
<li><p><strong>protractor.conf.js</strong>: aquí se encuentra la configuración de los test End to End.</p></li>
</ul>
</section></section>
<section><section id="appmodule" class="titleslide slide level1"><h1><span class="header-section-number">6</span> AppModule</h1></section><section id="introducción-2" class="slide level2">
<h2><span class="header-section-number">6.1</span> Introducción</h2>
<ul>
<li><p>Cuando lanzamos la ejecución de la aplicación, Angular no carga todos los componentes, ni tiene en mente todos los selectores, esto es una perdida increíble de rendimiento.</p></li>
<li><p>El primer archivo que se carga es el <strong>main.ts</strong> que es el que inicia la aplicación.</p></li>
<li><p>Este archivo le indica que cargue lo que hay en <strong>app.module.ts</strong>, donde se define cual es el componente raíz (app.component), desde donde van a colgar todos los demás componentes de la aplicación.</p></li>
</ul>
</section><section id="index.html-1" class="slide level2">
<h2><span class="header-section-number">6.2</span> index.html</h2>
<ul>
<li><p>El componente raíz tiene un selector, que es el que se usa en el archivo <strong>index.html</strong> para cargar el componente.</p></li>
<li><p>En el archivo <strong>index.html</strong> no hay ningún script, por lo que parece que no carga ningún archivo para ejecutar nuestra aplicación, pero si lo inspeccionamos con las <em>herramientas de desarrollador</em> de nuestro navegador si que vemos unos cuantos scripts.</p></li>
<li><p>De esos scripts, el más importante es el <strong>main.bundle.js</strong>, es el que tiene todo nuestro código y el código de los paquetes que necesitamos para ejecutar la aplicación.</p></li>
</ul>
</section><section id="el-módulo-raíz" class="slide level2">
<h2><span class="header-section-number">6.3</span> El módulo raíz</h2>
<ul>
<li>Un módulo en Angular describe cómo encajan las partes de la aplicación. Cada aplicación tiene al menos un módulo, el módulo raíz que es el que inicializa la aplicación, puedes llamarlo como quieras, como convención lo llamaremos <strong>AppModule</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> NgModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> BrowserModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> AppComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.component&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
<span class="dt">imports</span><span class="op">:</span> [ BrowserModule ]<span class="op">,</span>
<span class="dt">declarations</span><span class="op">:</span> [ AppComponent ]<span class="op">,</span>
<span class="dt">bootstrap</span><span class="op">:</span> [ AppComponent ]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="ngmodule" class="slide level2">
<h2><span class="header-section-number">6.4</span> <span class="citation" data-cites="NgModule">@NgModule</span></h2>
<ul>
<li>Después de importar los módulos necesarios, tenemos el <a href="https://angular.io/docs/ts/latest/guide/glossary.html#!#decorator">decorador/anotación</a> <strong><span class="citation" data-cites="NgModule">@NgModule</span></strong>. Identifica AppModule como un módulo de Angular, coge sus metadatos y le dice a Angular como compilar y ejecutar la aplicación.
<ul>
<li><strong>imports</strong>: importa clases necesarias para el funcionamiento de la aplicación. <strong>BrowserModule</strong> todas las aplicaciones la necesitan para poder ejecutarse en un navegador.</li>
<li><strong>declarations</strong>: De momento solo añadimos el único componente de la aplicación que tenemos.</li>
<li><strong>bootstrap</strong>: Añadimos el componente raíz, Angular lo creará e insertará dentro de la página <strong>index.html</strong>.</li>
</ul></li>
</ul>
</section><section id="imports" class="slide level2">
<h2><span class="header-section-number">6.5</span> Imports</h2>
<ul>
<li><p>Dentro de los imports añadimos características que van necesitar nuestra aplicación.</p></li>
<li><p>Muchas de estas características se organizan en módulos de Angular, por ejemplo los servicios HTTP están en el módulo <strong>HttpModule</strong>, el routing en el <strong>RouterModule</strong>.</p></li>
<li><p>Añadimos a los <em>imports</em> los módulos/características que va a usar nuestra aplicación.</p></li>
</ul>
</section><section id="declarations" class="slide level2">
<h2><span class="header-section-number">6.6</span> Declarations</h2>
<ul>
<li><p>Añadimos qué componentes pertenecen al <strong>AppModule</strong>, cada vez que creemos un componente nuevo, deberemos añadirlo a este array. Si usamos un componente sin haberlo declarado antes, el browser nos devolverá un error.</p></li>
<li><p>Solo añadimos en las declaraciones, componentes, directivas y pipes. No debemos añadir, otro módulos, servicios o clases del modelo.</p></li>
</ul>
</section><section id="bootstrap" class="slide level2">
<h2><span class="header-section-number">6.7</span> Bootstrap</h2>
<ul>
<li><p>Inicia la aplicación cargando el componente raíz. Este proceso crea todos los componentes y los inserta en el DOM, normalmente desencadena la creación de todo el árbol del DOM.</p></li>
<li><p>Aunque podemos poner más de un componente, no es lo normal, la mayoría de aplicaciones solo tienen un componente raíz desde el que se cargan todos los demás.</p></li>
<li><p>El componente raíz se puede llamar de cualquier manera, pero por convención lo llamamos <strong>AppComponent</strong>.</p></li>
</ul>
</section></section>
<section><section id="componentes" class="titleslide slide level1"><h1><span class="header-section-number">7</span> Componentes</h1></section><section id="introducción-3" class="slide level2">
<h2><span class="header-section-number">7.1</span> Introducción</h2>
<ul>
<li><p>Los componentes son los bloques de construcción de Angular que representan regiones de la pantalla.</p></li>
<li><p>Las aplicaciones en Angular se desarrollan en base a componentes.</p></li>
<li><p>En lugar de tener un árbol de etiquetas como tenemos en las páginas web, ahora tendremos un árbol de componentes que cuelgan de un componente padre.</p></li>
<li><p>De un componente pueden colgar uno o más componentes.</p></li>
</ul>
</section><section id="partes" class="slide level2">
<h2><span class="header-section-number">7.2</span> Partes</h2>
<ul>
<li>Un componente consta de las siguientes tres partes fundamentales:
<ul>
<li>Un template</li>
<li>Una clase</li>
<li>Un decorador</li>
</ul></li>
<li>Los componentes a parte de encapsular contenido (como hacen las etiquetas), también encapsulan alguna funcionalidad.</li>
</ul>
</section><section id="importar" class="slide level2">
<h2><span class="header-section-number">7.3</span> Importar</h2>
<ul>
<li>A la hora de crear un componente, hay que asegurarse de que se añade en el array de <strong>declarations</strong> del <strong>app.module.ts</strong> y de que se importa correctamente.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> MiComponente <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./mi-componente/mi-componente.component&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    AppComponent<span class="op">,</span>
    MiComponente
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    BrowserModule<span class="op">,</span>
    FormsModule<span class="op">,</span>
    HttpModule
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> []<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
export class AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="template-i" class="slide level2">
<h2><span class="header-section-number">7.4</span> Template (I)</h2>
<ul>
<li>El template o plantilla representa la vista (capa V del MVC) que se escribe con HTML.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Mi componente<span class="kw">&lt;/h1&gt;</span></code></pre></div>
</section><section id="template-ii" class="slide level2">
<h2><span class="header-section-number">7.5</span> Template (II)</h2>
<ul>
<li>Se puede definir el template en una linea o definirlo en un archivo externo.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-root&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h1&gt;Mi componente&lt;/h1&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> [<span class="vs">`color: black;`</span>]
<span class="op">}</span>)

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-root&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./app.component.html&#39;</span><span class="op">,</span>
  <span class="dt">styleUrls</span><span class="op">:</span> [<span class="st">&#39;./app.component.css&#39;</span>]
<span class="op">}</span>)</code></pre></div>
</section><section id="class" class="slide level2">
<h2><span class="header-section-number">7.6</span> Class</h2>
<ul>
<li><p>La clase de un componente se corresponde con el controlador.</p></li>
<li><p>Es donde inicializamos y definimos el estado de los componentes.</p></li>
<li><p>Aquí también se define el comportamiento de los componentes en forma de funciones, las cuales se asignan a los eventos del template.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">export class AppComponent <span class="op">{</span>
  title <span class="op">=</span> <span class="st">&#39;app works!&#39;</span><span class="op">;</span>
  <span class="at">constructor</span>() <span class="op">{}</span>
  <span class="at">onClick</span>() <span class="op">{</span>
    <span class="co">// ...</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="decorador-i" class="slide level2">
<h2><span class="header-section-number">7.7</span> Decorador (I)</h2>
<ul>
<li><p>Un <strong>decorador</strong> es una herramienta que sirve para extender una función con mediante otra función, pero sin tocar la original que se está extendiendo.</p></li>
<li><p>Angular usa los decoradores para registrar los componentes, añadiéndoles información para que sean reconocidos en otras partes de la aplicación.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-root&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./app.component.html&#39;</span><span class="op">,</span>
  <span class="dt">styleUrls</span><span class="op">:</span> [<span class="st">&#39;./app.component.css&#39;</span>]
<span class="op">}</span>)</code></pre></div>
</section><section id="decorador-i-1" class="slide level2">
<h2><span class="header-section-number">7.8</span> Decorador (I)</h2>
<ul>
<li>En el decorador anterior podemos distinguir las tres propiedades que le está agregando al componente.
<ul>
<li><strong>selector</strong>: es el nombre de la etiqueta que se crea cuando se procesa el componente. Para mostrar el componente tenemos que llamar a la etiqueta <code>&lt;app-root&gt;&lt;/app-root&gt;</code> en el lugar del HTML donde queremos mostrarlo. El nombre del selector tiene que ser único en la aplicación.</li>
<li><strong>templateUrl</strong>: indica donde se encuentra la plantilla o template del componente.</li>
<li><strong>styleUrls</strong>: indica los archivos de estilos que se le van a aplicar a este componente.</li>
</ul></li>
</ul>
</section><section id="ciclo-de-vida-de-los-componentes" class="slide level2">
<h2><span class="header-section-number">7.9</span> Ciclo de vida de los componentes</h2>
<ul>
<li><p>Los componentes tienen un ciclo de vida que maneja Angular usando los <strong>hooks</strong>.</p></li>
<li><p>Los hooks del ciclo de vida nos permiten interactuar con los componente en momentos claves del ciclo de vida, como por ejemplo justo cuando se ha inicializado un componente, cuando este sufre cambios en alguna de sus propiedades o cuando va a ser eliminado.</p></li>
<li><p>Estos hooks son interfaces, las cuales tienen un método llamado como la propia interface precedido de ng.</p></li>
</ul>
</section><section id="hooks-i" class="slide level2">
<h2><span class="header-section-number">7.10</span> Hooks (I)</h2>
<ul>
<li><p><strong>ngOnChanges</strong>: se ejecuta cuando hay un cambio en el valor de alguna propiedad.</p></li>
<li><p><strong>ngOnInit</strong>: se lanza cuando se han inicializado todas las propiedades del componente, por lo que el componente también se ha inicializado.</p></li>
<li><p><strong>ngOnDestroy</strong>: se ejecuta justo antes de destruir un componente.</p></li>
</ul>
</section><section id="hooks-ii" class="slide level2">
<h2><span class="header-section-number">7.11</span> Hooks (II)</h2>
<ul>
<li><p><strong>ngDoCheck</strong>: se llama en cada detección de cambios, justo después del <strong>ngOnchanges</strong> y <strong>ngOnInit</strong>.</p></li>
<li><p><strong>ngAfterContentInit</strong>: se ejecuta cuando se inserta contenido externo al componente en dicho componente (<code>&lt;ng-content&gt;&lt;/ng-content&gt;</code>).</p></li>
<li><p><strong>ngAfterContentChecked</strong>: cuando hay un cambio en el contenido insertado con <strong>ng-content</strong>.</p></li>
</ul>
</section><section id="hooks-iii" class="slide level2">
<h2><span class="header-section-number">7.12</span> Hooks (III)</h2>
<ul>
<li><p><strong>ngAfterViewInit</strong>: se lanza cuando se ha inicializado la vista del componente y las vistas de sus componente hijos.</p></li>
<li><p><strong>ngAfterViewChecked</strong>: se lanza despues de checkear las vistas del componente y sus hijos, es decir, justo despues del <strong>ngAfterViewInit</strong>.</p></li>
</ul>
</section><section id="ejemplo" class="slide level2">
<h2><span class="header-section-number">7.13</span> Ejemplo</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">import <span class="op">{</span> Component<span class="op">,</span> OnInit<span class="op">}</span> from <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
import <span class="op">{</span> Item <span class="op">}</span> from <span class="st">&#39;../item&#39;</span><span class="op">;</span>
import <span class="op">{</span> ItemService <span class="op">}</span> from <span class="st">&#39;../item.service&#39;</span><span class="op">;</span>
export class ItemListComponent implements OnInit <span class="op">{</span>
  <span class="dt">items</span><span class="op">:</span> Item[] <span class="op">=</span> []<span class="op">;</span>
 
  <span class="at">constructor</span>(private <span class="dt">itemService</span><span class="op">:</span> ItemService) <span class="op">{</span> <span class="op">}</span>
 
  <span class="at">ngOnInit</span>() <span class="op">{</span>
    <span class="va">this</span>.<span class="at">recipes</span> <span class="op">=</span> <span class="va">this</span>.<span class="va">itemService</span>.<span class="at">getItems</span>()<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section></section>
<section><section id="data-binding" class="titleslide slide level1"><h1><span class="header-section-number">8</span> Data Binding</h1></section><section id="introducción-4" class="slide level2">
<h2><span class="header-section-number">8.1</span> Introducción</h2>
<ul>
<li><p>El <strong>data binding</strong> consiste en la sincronización entre los datos del componente y la vista.</p></li>
<li>En Angular nos encontramos cuatro formas distintas de controlar el flujo en el que se mueven los datos:
<ul>
<li><strong>String Interpolation</strong></li>
<li><strong>Property Binding</strong></li>
<li><strong>Event Binding</strong></li>
<li><strong>Two-Way Binding</strong></li>
</ul></li>
</ul>
</section><section id="string-interpolation-i" class="slide level2">
<h2><span class="header-section-number">8.2</span> String Interpolation (I)</h2>
<ul>
<li><p>El <strong>string interpolation</strong> se usa para renderizar el valor de una variable en las plantillas de los componentes, como valor de las etiquetas o incluso de alguno de los atributos de estas etiquetas.</p></li>
<li><p>Los datos que se usan son solo de lectura.</p></li>
<li><p>Se usa con <strong>{{nombreVariable}}</strong>.</p></li>
</ul>
</section><section id="string-interpolation-ii" class="slide level2">
<h2><span class="header-section-number">8.3</span> String Interpolation (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">nombre<span class="op">:</span> string <span class="op">=</span> <span class="st">&#39;Sara&#39;</span><span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Mis datos<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;p&gt;</span>Mi nombre es {{ nombre }}.<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- Mi nombre es Sara. --&gt;</span></code></pre></div>
</section><section id="property-binding-i" class="slide level2">
<h2><span class="header-section-number">8.4</span> Property Binding (I)</h2>
<ul>
<li><p>Las <strong>property binding</strong> se usan para enviar valores desde el componente a la plantilla.</p></li>
<li><p>Se usa con <strong>[propiedad]=&quot;expresión&quot;</strong>.</p></li>
<li><p>La expresión tiene que devolver un valor del tipo que espera obtener la propiedad.</p></li>
<li><p>También es de lectura. Se suele usar con las propiedades del DOM, de los componentes y de las directivas.</p></li>
</ul>
</section><section id="property-binding-ii" class="slide level2">
<h2><span class="header-section-number">8.5</span> Property Binding (II)</h2>
<div class="sourceCode"><pre class="sourceCode css"><code class="sourceCode css">bordeRojo {
  <span class="kw">border</span>: <span class="dv">1px</span> <span class="dv">solid</span> <span class="dv">red</span>;
}

letraAzul {
  <span class="kw">color</span>: <span class="dv">blue</span>;
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">datosValidos<span class="op">:</span> boolean <span class="op">=</span> <span class="kw">false</span><span class="op">;</span>

<span class="at">setStyles</span>() <span class="op">{</span>
  <span class="cf">return</span> <span class="op">{</span>
    <span class="st">&#39;font-size&#39;</span><span class="op">:</span> <span class="st">&#39;15px&#39;</span><span class="op">;</span>
    <span class="st">&#39;text-decoration&#39;</span><span class="op">:</span> <span class="st">&#39;line-through&#39;</span><span class="op">;</span>
  <span class="op">};</span>
<span class="op">}</span></code></pre></div>
</section><section id="property-binding-iii" class="slide level2">
<h2><span class="header-section-number">8.6</span> Property Binding (III)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> [ngClass]=</span><span class="st">&quot;{bordeRojo: true, letraAzul: false}&quot;</span><span class="kw">&gt;</span>...​<span class="kw">&lt;/p&gt;</span>
<span class="co">&lt;!-- Añade la clase bordeRojo pero no añade la clase letraAzul. --&gt;</span>

<span class="kw">&lt;p</span><span class="ot"> [ngStyle]=</span><span class="st">&quot;setStyles()&quot;</span><span class="kw">&gt;</span>...​<span class="kw">&lt;/p&gt;</span>
<span class="co">&lt;!-- Añade los estilos que devuelve la funcion setStyles. --&gt;</span>

<span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> [disabled]=</span><span class="st">&quot;!datosValidos&quot;</span><span class="kw">&gt;</span>Enviar datos<span class="kw">&lt;/button&gt;</span>
<span class="co">&lt;!-- Deshabilita el botón si datosValidos es false. --&gt;</span></code></pre></div>
</section><section id="property-binding-iv" class="slide level2">
<h2><span class="header-section-number">8.7</span> Property Binding (IV)</h2>
<ul>
<li><p>A los componentes se les puede pasar desde fuera del propio componente (por ejemplo el componente padre) algún valor para alguna de sus propiedades.</p></li>
<li><p>Esto es posible por el decorator <strong><span class="citation" data-cites="Input">@Input</span></strong>.</p></li>
</ul>
</section><section id="property-binding-v" class="slide level2">
<h2><span class="header-section-number">8.8</span> Property Binding (V)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component<span class="op">,</span> Input <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;mi-componente&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`{{result}}`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> PropertyBindingComponent <span class="op">{</span>
  @<span class="at">Input</span>() <span class="dt">result</span><span class="op">:</span> number <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>
  <span class="co">// valor por defecto si no pasan el Input</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;mi-componente</span><span class="ot"> [result]=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;&lt;/mi-componente&gt;</span></code></pre></div>
</section><section id="event-binding-i" class="slide level2">
<h2><span class="header-section-number">8.9</span> Event Binding (I)</h2>
<ul>
<li><p>Con el <strong>event binding</strong> le asignamos una función de un componente a un evento nativo como lo es el click, el mouseover, submit, ..</p></li>
<li><p>Cuando un elemento detecte un evento sobre el que hay asignada una función, se ejecutará la función.</p></li>
<li><p>En este caso la comunicación va desde la plantilla al componente.</p></li>
<li><p>La sintaxis es <strong>(evento)=&quot;expresión&quot;</strong> donde la expresión suele se una función declarada en el componente.</p></li>
</ul>
</section><section id="event-binding-ii" class="slide level2">
<h2><span class="header-section-number">8.10</span> Event Binding (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">saludar</span>() <span class="op">{</span>
  <span class="at">alert</span>(<span class="st">&#39;Hola mundo!&#39;</span>)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;button</span><span class="ot"> (click)=</span><span class="st">&quot;saludar()&quot;</span><span class="kw">&gt;</span>Saludame<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;button</span><span class="ot"> (click)=</span><span class="st">&quot;console.log(&#39;Hola mundo en la consola!!!&#39;)&quot;</span><span class="kw">&gt;</span>Saludame en la consola<span class="kw">&lt;/button&gt;</span></code></pre></div>
</section><section id="event-binding-iii" class="slide level2">
<h2><span class="header-section-number">8.11</span> Event Binding (III)</h2>
<ul>
<li>Al igual que se puede crear un property binding, también se puede crear un event binding.</li>
</ul>
</section><section id="event-binding-iv" class="slide level2">
<h2><span class="header-section-number">8.12</span> Event Binding (IV)</h2>
<ul>
<li><p>Lo primero de todo es importar EventEmitter que permite disparar o emitir eventos con su método <strong>.emit()</strong>.</p></li>
<li><p>También es necesario usar el decorator <strong><span class="citation" data-cites="Output">@Output</span></strong> para permitir que se pueda emitir datos hacia fuera del componente.</p></li>
<li><p>Se crea una instancia de EventEmitter que lleva el <span class="citation" data-cites="Output">@Output</span> con un alias para poder captar el evento desde el componente que está escuchándolo.</p></li>
<li><p>Y se crea una función que disparará el evento cuando se realice una acción (por ejemplo un click en un botón).</p></li>
</ul>
</section><section id="event-binding-v" class="slide level2">
<h2><span class="header-section-number">8.13</span> Event Binding (V)</h2>
<ul>
<li>En el siguiente caso, cuando se pincha en el botón, se llama a la función <strong>onClicked()</strong>, la cual emite el evento.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component<span class="op">,</span> EventEmitter<span class="op">,</span> Output <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;mi-event-binding&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;button (click)=&quot;onClicked()&quot;&gt;Haz click&lt;/button&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> EventBindingComponent <span class="op">{</span>

  @<span class="at">Output</span>(<span class="st">&#39;clickable&#39;</span>) clicked <span class="op">=</span> <span class="kw">new</span> EventEmitter<span class="op">&lt;</span>string<span class="op">&gt;</span>()<span class="op">;</span>

  <span class="at">onClicked</span>() <span class="op">{</span>
    <span class="co">// Emite el evento clickable</span>
    <span class="kw">this</span>.<span class="va">clicked</span>.<span class="at">emit</span>(<span class="st">&#39;This works!&#39;</span>)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="event-binding-vi" class="slide level2">
<h2><span class="header-section-number">8.14</span> Event Binding (VI)</h2>
<ul>
<li>En el componente que está escuchando el evento personalizado se añade un event binding que llamará a una función que se ejecutará cuando ocurra dicho evento.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">onClicked</span>(value<span class="op">:</span> string) <span class="op">{</span>
  <span class="at">alert</span>(value)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="co">&lt;!-- Llamará a la función onClicked cuando se dispare el evento clickable --&gt;</span>
<span class="kw">&lt;mi-event-binding</span><span class="ot"> (clickable)=</span><span class="st">&quot;onClicked($event)&quot;</span><span class="kw">&gt;&lt;/mi-event-binding&gt;</span></code></pre></div>
<ul>
<li>En el <strong>$event</strong> se envía lo que va como parámetro en el método <strong>emit</strong>.</li>
</ul>
</section><section id="two-way-binding-i" class="slide level2">
<h2><span class="header-section-number">8.15</span> Two-Way Binding (I)</h2>
<ul>
<li><p>El <strong>Two-Way binding</strong> es la combinación de los dos casos anteriores, el <strong>property binding</strong> y el <strong>event binding</strong> y se refleja en la sintaxis.</p></li>
<li><p>Recordad que se usaba <strong>[]</strong> para leer datos del componente en la plantilla y <strong>()</strong> para enviar datos desde la plantilla al componente.</p></li>
<li><p>La sintaxis es <strong>[(ngModel)]=&quot;propiedad&quot;</strong>, por lo que lee y envía datos. Este caso es el que se suele usar en los formularios.</p></li>
</ul>
</section><section id="two-way-binding-ii" class="slide level2">
<h2><span class="header-section-number">8.16</span> Two-Way Binding (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">persona <span class="op">=</span> <span class="op">{</span>
  <span class="dt">nombre</span><span class="op">:</span> <span class="st">&#39;Robb&#39;</span>
  <span class="dt">apellidos</span><span class="op">:</span> <span class="st">&#39;Stark&#39;</span>
  <span class="dt">edad</span><span class="op">:</span> <span class="dv">28</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="co">&lt;!-- Al modificar el nombre en el primer input envía los datos al componente</span>
<span class="co">y cambia el valor, y al cambiar el valor en el componente, cambia el valor</span>
<span class="co">en el resto de elementos que lo usan. --&gt;</span>
<span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;persona.nombre&quot;</span> <span class="kw">/&gt;</span>
<span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;persona.nombre&quot;</span><span class="ot"> disabled</span> <span class="kw">/&gt;</span>
<span class="kw">&lt;label&gt;</span>{{persona.nombre}}<span class="kw">&lt;/label&gt;</span></code></pre></div>
</section></section>
<section><section id="pipes" class="titleslide slide level1"><h1><span class="header-section-number">9</span> Pipes</h1></section><section id="introducción-i" class="slide level2">
<h2><span class="header-section-number">9.1</span> Introducción (I)</h2>
<ul>
<li><p>Los <strong>pipes</strong> permiten coger un dato de entrada y transformarlo sin cambiar su valor, solo la forma en que se visualiza.</p></li>
<li><p>Se llaman pipes porque se usan con el símbolo <strong>|</strong>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">valor<span class="op">:</span> string <span class="op">=</span> <span class="st">&#39;esto es un string&#39;</span><span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p&gt;</span>{{ valor }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- esto es un string --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ valor | uppercase }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- ESTO ES UN STRING --&gt;</span></code></pre></div>
</section><section id="introducción-ii" class="slide level2">
<h2><span class="header-section-number">9.2</span> Introducción (II)</h2>
<ul>
<li>Otro ejemplo de pipe es el siguiente que se usa con las fechas:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">fechaNacimiento <span class="op">=</span> <span class="kw">new</span> <span class="at">Date</span>(<span class="dv">1992</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">6</span>)<span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p&gt;</span>{{ fechaNacimiento }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- Thu Feb 06 1992 00:00:00 GMT+0100 --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ fechaNacimiento | date }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- Feb 6, 1992 --&gt;</span></code></pre></div>
</section><section id="argumentos-i" class="slide level2">
<h2><span class="header-section-number">9.3</span> Argumentos (I)</h2>
<ul>
<li><p>Algunos de los pipes existentes pueden aceptar uno o multiples argumentos.</p></li>
<li><p>Para añadir los argumentos al pipe, hay que añadir al pipe <strong>:</strong> seguidos y luego el argumento.</p></li>
<li><p>Si le podemos añadir mas de un argumento, sigue el mismo método, <strong>:</strong> seguidos del argumento.</p></li>
</ul>
</section><section id="argumentos-ii" class="slide level2">
<h2><span class="header-section-number">9.4</span> Argumentos (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">precio<span class="op">:</span> number <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p&gt;</span>{{ precio }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- 10 --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ precio | currency:&#39;EUR&#39; }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- EUR10.00 --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ fechaNacimiento | date:&#39;dd/MM/yy&#39; }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- 06/02/92 --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ valor | slice:2 }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- to es un string --&gt;</span>
<span class="kw">&lt;p&gt;</span>{{ valor | slice:2:14 }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- to es un str --&gt;</span></code></pre></div>
</section><section id="argumentos-iii" class="slide level2">
<h2><span class="header-section-number">9.5</span> Argumentos (III)</h2>
<ul>
<li>Es posible encadenar varios pipes poniendo uno detrás de otro separados por <strong>|</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p&gt;</span>{{ valor | slice:2:14 | uppercase }}<span class="kw">&lt;/p&gt;</span> <span class="co">&lt;!-- TO ES UN STR --&gt;</span></code></pre></div>
</section><section id="crear-un-pipe-i" class="slide level2">
<h2><span class="header-section-number">9.6</span> Crear un pipe (I)</h2>
<ul>
<li>Es posible crear pipes propios con el siguiente comando de angular-cli:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g p miNuevoPipe</code></pre></div>
<ul>
<li>Con este comando, Angular-CLI genera dos archivos, uno de testing, y el otro es donde se define el pipe.</li>
</ul>
</section><section id="crear-un-pipe-ii" class="slide level2">
<h2><span class="header-section-number">9.7</span> Crear un pipe (II)</h2>
<ul>
<li>En el archivo donde se define el pipe se encuentra el decorator <strong><span class="citation" data-cites="Pipe">@Pipe</span></strong> el cual añade el nombre con el que vamos a llamar al pipe cuando se quiera usar.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Pipe<span class="op">,</span> PipeTransform <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Pipe</span>(<span class="op">{</span>
  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;mi-nuevo-pipe&#39;</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> MiNuevoPipe <span class="kw">implements</span> PipeTransform <span class="op">{</span>
  <span class="at">transform</span>(<span class="dt">value</span><span class="op">:</span> any<span class="op">,</span> args<span class="op">?</span>: any)<span class="op">:</span> any <span class="op">{</span>
    <span class="cf">return</span> (value <span class="op">*</span> <span class="dv">2</span>)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="crear-un-pipe-iii" class="slide level2">
<h2><span class="header-section-number">9.8</span> Crear un pipe (III)</h2>
<ul>
<li><p>La función de <strong>transform</strong> es la que se ejecuta cada vez que usamos el pipe y es la que está definida en el interface que implementa la clase del pipe, el <strong>PipeTransform</strong>.</p></li>
<li><p>Esta función recibe como primer parámetro el valor que vamos a transformar, y como segundo los parámetros que se le pueden pasar al pipe.</p></li>
<li><p>Hay que revisar que el pipe se ha añadido al array de <strong>declarations</strong> que hay en el <strong>app.module.ts</strong>.</p></li>
</ul>
</section><section id="pipes-puros-e-impuros-i" class="slide level2">
<h2><span class="header-section-number">9.9</span> Pipes puros e impuros (I)</h2>
<ul>
<li><p>Todos los pipes vistos antes son <strong>pure pipes</strong>, es decir que solo se ejecutan si el valor primitivo o la referencia a si mismo cambian.</p></li>
<li><p>También existen los <strong>impure pipes</strong> que se usan cuando se necesita detectar cualquier cambio que se detecte.</p></li>
<li><p>Un ejemplo de impure pipe puede ser cuando añadimos o quitamos elementos de un array.</p></li>
</ul>
</section><section id="pipes-puros-e-impuros-ii" class="slide level2">
<h2><span class="header-section-number">9.10</span> Pipes puros e impuros (II)</h2>
<ul>
<li><p>El pure pipe no se ejecutarían porque no es el valor o la instancia lo que cambia, sino que es el contenido.</p></li>
<li><p>Por defecto, todos los pipes son puros, para indicar que un pipe es impuro hay que poner en el decorator <strong>pure: false</strong>.</p></li>
<li><p>Por supuesto, los pipes impuros conllevan un gasto mayor de recursos porque se ejecutan cada vez que se realiza una acción.</p></li>
</ul>
</section><section id="pipes-puros-e-impuros-ii-1" class="slide level2">
<h2><span class="header-section-number">9.11</span> Pipes puros e impuros (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Pipe</span>(<span class="op">{</span>
  <span class="dt">name</span><span class="op">:</span> <span class="st">&#39;filter&#39;</span><span class="op">,</span>
  <span class="dt">pure</span><span class="op">:</span> <span class="kw">false</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> FilterPipe <span class="kw">implements</span> PipeTransform <span class="op">{</span>
  <span class="at">transform</span>(<span class="dt">value</span><span class="op">:</span> any<span class="op">,</span> args<span class="op">?</span>: any)<span class="op">:</span> any <span class="op">{</span>
    <span class="kw">let</span> resultArray <span class="op">=</span> []<span class="op">;</span>
    <span class="cf">for</span> (<span class="kw">let</span> item of value) <span class="op">{</span>
      <span class="cf">if</span> (<span class="va">item</span>.<span class="at">match</span>(<span class="st">&#39;\^.*&#39;</span> <span class="op">+</span> args <span class="op">+</span> <span class="st">&#39;.*\$&#39;</span>)) <span class="op">{</span>
        <span class="va">resultArray</span>.<span class="at">push</span>(item)<span class="op">;</span>
      <span class="op">}</span>
    <span class="op">}</span>
    <span class="cf">return</span> resultArray<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="pipes-puros-e-impuros-iii" class="slide level2">
<h2><span class="header-section-number">9.12</span> Pipes puros e impuros (III)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;ul&gt;</span>
  <span class="kw">&lt;li</span><span class="ot"> *ngFor=</span><span class="st">&quot;let item of values | filter:&#39;ea&#39;&quot;</span><span class="kw">&gt;</span>{{ item }}<span class="kw">&lt;/li&gt;</span>
<span class="kw">&lt;/ul&gt;</span>
<span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> value=</span><span class="st">&quot;{{newItem}}&quot;</span><span class="kw">&gt;</span>
<span class="kw">&lt;button</span><span class="ot"> (click)=</span><span class="st">&quot;values.push(newItem.value)&quot;</span><span class="kw">&gt;</span>Add Item<span class="kw">&lt;/button&gt;</span></code></pre></div>
</section><section id="async-pipe-i" class="slide level2">
<h2><span class="header-section-number">9.13</span> Async Pipe (I)</h2>
<ul>
<li><p>El <strong>async pipe</strong> es un ejemplo de impure pipe que se subscribe a un <strong>Observable</strong> o a una <strong>Promise</strong> y devuelve el último valor emitido.</p></li>
<li><p>Una vez que se elimina el componente, este pipe cancela la subscripción para evitar perdidas de memoria.</p></li>
</ul>
</section><section id="async-pipe-ii" class="slide level2">
<h2><span class="header-section-number">9.14</span> Async Pipe (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">asyncValue <span class="op">=</span> <span class="kw">new</span> <span class="at">Promise</span>((resolve<span class="op">,</span> reject) ⇒ <span class="op">{</span>
  <span class="at">setTimeout</span>(() ⇒ <span class="at">resolve</span>(<span class="st">&#39;Data is here!&#39;</span>)<span class="op">,</span> <span class="dv">2000</span>)<span class="op">;</span>
<span class="op">}</span>)<span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p&gt;</span>{{ asyncValue | async }}<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section></section>
<section><section id="directivas" class="titleslide slide level1"><h1><span class="header-section-number">10</span> Directivas</h1></section><section id="introducción-5" class="slide level2">
<h2><span class="header-section-number">10.1</span> Introducción</h2>
<ul>
<li><p>Las directivas son como componentes (sin template) que le dicen a Angular que hacer en ciertas partes del código.</p></li>
<li><p>Añaden comportamiento dinámico a la aplicación usando etiquetas o selectores.</p></li>
<li><p>Los componentes son directivas con template, de hecho <span class="citation" data-cites="Component">@Component</span> es un decorator de <span class="citation" data-cites="Directive">@Directive</span> con características propias de los templates.</p></li>
</ul>
</section><section id="tipos" class="slide level2">
<h2><span class="header-section-number">10.2</span> Tipos</h2>
<ul>
<li>Además de los componentes, tenemos otros tipos de directivas:
<ul>
<li>Directivas atributo</li>
<li>Directivas estructurales</li>
</ul></li>
</ul>
</section><section id="directivas-atributo-i" class="slide level2">
<h2><span class="header-section-number">10.3</span> Directivas atributo (I)</h2>
<ul>
<li>Las <strong>attribute directives</strong> interaccionan con el elemento al que se le aplica la directiva para alterar su apariencia o su comportamiento, por ejemplo para añadirle una clase o cambiarle un estilo.</li>
</ul>
</section><section id="directivas-atributo-ii" class="slide level2">
<h2><span class="header-section-number">10.4</span> Directivas atributo (II)</h2>
<ul>
<li><strong>ngModel</strong>: implementa el mecanismo del two-way binding.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;input</span><span class="ot"> [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;persona.nombre&quot;</span><span class="kw">&gt;</span></code></pre></div>
</section><section id="directivas-atributo-iii" class="slide level2">
<h2><span class="header-section-number">10.5</span> Directivas atributo (III)</h2>
<ul>
<li><strong>ngClass</strong>: esta directiva permite añadir o quitar varias clases de forma simultánea y dinámica de un elemento</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> [ngClass]=</span><span class="st">&quot;{bordeRojo: true, letraAzul: false}&quot;</span><span class="kw">&gt;</span>...​<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section><section id="directivas-atributo-iv" class="slide level2">
<h2><span class="header-section-number">10.6</span> Directivas atributo (IV)</h2>
<ul>
<li><strong>ngStyle</strong>: esta directiva permite añadir varios estilo en línea a un elemento.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> [ngStyle]=</span><span class="st">&quot;{&#39;font-size&#39;: &#39;15px&#39;;}&quot;</span><span class="kw">&gt;</span>...<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section><section id="directivas-atributo-v" class="slide level2">
<h2><span class="header-section-number">10.7</span> Directivas atributo (V)</h2>
<ul>
<li><p>Como se puede observar, tanto el ngClass como el ngStyle esperan que su valor sea un objeto de JavaScript (<strong>{}</strong>).</p></li>
<li><p>En los objetos de JavaScript, si una de las claves tiene un <strong>-</strong>, esa clave va entre <strong>''</strong>.</p></li>
</ul>
</section><section id="crear-una-directiva-atributo-i" class="slide level2">
<h2><span class="header-section-number">10.8</span> Crear una directiva atributo (I)</h2>
<ul>
<li>Para crear tus propias directivas se usa el comando que nos da Angular-CLI para ello:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g d miHighlight</code></pre></div>
</section><section id="crear-una-directiva-atributo-ii" class="slide level2">
<h2><span class="header-section-number">10.9</span> Crear una directiva atributo (II)</h2>
<ul>
<li><p>Este comando nos genera unos archivos, en los que el más importante que es donde se define la directiva es el <strong>mi-highlight.directive.ts</strong>.</p></li>
<li><p>En este archivo se encuentra el decorator <span class="citation" data-cites="Directive">@Directive</span> en el que se indica el selector con el que se va a llamar.</p></li>
</ul>
</section><section id="crear-una-directiva-atributo-iii" class="slide level2">
<h2><span class="header-section-number">10.10</span> Crear una directiva atributo (III)</h2>
<ul>
<li><p>Este decorador no tiene el templateUrl ni el styleUrls porque como hemos dicho antes, las directivas son componentes sin plantilla, y al no haber plantilla no se necesitan estilos.</p></li>
<li><p>Para poder usarla hay que añadirla en el array de <strong>declarations</strong> del archivo <strong>app.module.ts</strong>.</p></li>
</ul>
</section><section id="crear-una-directiva-atributo-iv" class="slide level2">
<h2><span class="header-section-number">10.11</span> Crear una directiva atributo (IV)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Directive<span class="op">,</span> ElementRef <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Directive</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;[miHighlight]&#39;</span>
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> MiHighlightDirective <span class="op">{</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">elementRef</span><span class="op">:</span> ElementRef) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">elementRef</span>.<span class="va">nativeElement</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> <span class="st">&#39;green&#39;</span><span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="crear-una-directiva-atributo-v" class="slide level2">
<h2><span class="header-section-number">10.12</span> Crear una directiva atributo (V)</h2>
<ul>
<li>El ElementRef se inyecta en el constructor de la directiva para dar acceso a los elementos del DOM.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> miHighlight</span><span class="kw">&gt;</span>Esto esta subrayado<span class="kw">&lt;/p&gt;</span></code></pre></div>
<ul>
<li>Hay que asegurarse de que el selector de la directiva sea único, para evitar conflictos con otras directivas. Una buena práctica es añadirle un prefijo al selector. El prefijo <em>ng</em> está reservado para Angular.</li>
</ul>
</section><section id="crear-una-directiva-atributo-vi" class="slide level2">
<h2><span class="header-section-number">10.13</span> Crear una directiva atributo (VI)</h2>
<ul>
<li><p>La directiva se puede hacer más dinámica, haciendo que reaccione a ciertos eventos.</p></li>
<li><p>Para ello se necesita usar el decorador <strong><span class="citation" data-cites="HostListener">@HostListener</span></strong> que se subscribe a los eventos que recibe el elemento del DOM al que se le ha asignado la directiva.</p></li>
</ul>
</section><section id="crear-una-directiva-atributo-vii" class="slide level2">
<h2><span class="header-section-number">10.14</span> Crear una directiva atributo (VII)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Directive<span class="op">,</span> ElementRef<span class="op">,</span> HostListener<span class="op">,</span> Input <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">class</span> MiHighlightDirective <span class="op">{</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">elementRef</span><span class="op">:</span> ElementRef) <span class="op">{</span> <span class="op">}</span>

  @<span class="at">HostListener</span>(<span class="st">&#39;mouseenter&#39;</span>) <span class="at">onMouseEnter</span>() <span class="op">{</span>
  <span class="kw">this</span>.<span class="at">highlight</span>(<span class="st">&#39;yellow&#39;</span>)<span class="op">;</span>
  <span class="op">}</span>

  @<span class="at">HostListener</span>(<span class="st">&#39;mouseleave&#39;</span>) <span class="at">onMouseLeave</span>() <span class="op">{</span>
  <span class="kw">this</span>.<span class="at">highlight</span>(<span class="kw">null</span>)<span class="op">;</span>
  <span class="op">}</span>

  <span class="kw">private</span> <span class="at">highlight</span>(<span class="dt">color</span><span class="op">:</span> string) <span class="op">{</span>
  <span class="kw">this</span>.<span class="va">elementRef</span>.<span class="va">nativeElement</span>.<span class="va">style</span>.<span class="at">backgroundColor</span> <span class="op">=</span> color<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="crear-una-directiva-atributo-viii" class="slide level2">
<h2><span class="header-section-number">10.15</span> Crear una directiva atributo (VIII)</h2>
<ul>
<li><p>También se le puede pasar como parámetro el color con el que se quiere realizar el marcado del texto.</p></li>
<li><p>Y para eso se ha importado el decorator <strong><span class="citation" data-cites="Input">@Input</span></strong> que permite asignar un valor que nos manda el template a la propiedad del componente.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Input</span>() highlightColor<span class="op">:</span> string<span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> miHighlight highlightColor=</span><span class="st">&quot;yellow&quot;</span><span class="kw">&gt;</span>Marcado en amarillo<span class="kw">&lt;/p&gt;</span>
<span class="kw">&lt;p</span><span class="ot"> miHighlight [highlightColor]=</span><span class="st">&quot;blue&quot;</span><span class="kw">&gt;</span>Marcado en azul<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section><section id="crear-una-directiva-atributo-ix" class="slide level2">
<h2><span class="header-section-number">10.16</span> Crear una directiva atributo (IX)</h2>
<ul>
<li>De esta forma se le indica el color que se aplica en el elemento que tiene la directiva, y se puede hacer mas simple añadiendole un alias al decorator <span class="citation" data-cites="Input">@Input</span> para aprovechar la llamada a la directiva y asignarle en la misma llamada el color.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Input</span>(<span class="st">&#39;miHighlight&#39;</span>) highlightColor<span class="op">:</span> string<span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> [miHighlight]=</span><span class="st">&quot;blue&quot;</span><span class="kw">&gt;</span>Marcado en azul<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section><section id="crear-una-directiva-atributo-x" class="slide level2">
<h2><span class="header-section-number">10.17</span> Crear una directiva atributo (X)</h2>
<ul>
<li>El <span class="citation" data-cites="HostListener">@HostListener</span> puede recibir un segundo parámetro <strong>[$event]</strong> en el decorador que le indica que evento ha ocurrido y para poder acceder a ese evento, se le pasa como parámetro a la función que se ejecuta.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">HostListener</span>(<span class="st">&#39;mouseenter&#39;</span><span class="op">,</span> [<span class="st">&#39;$event&#39;</span>]) <span class="at">mouseover</span>(event) <span class="op">{</span>
  <span class="co">// Muestra el evento que ha ocurrido.</span>
  <span class="va">console</span>.<span class="at">log</span>(event)<span class="op">;</span>
  <span class="co">// Muestra el elemento del DOM sobre el que ha ocurrido el evento.</span>
  <span class="va">console</span>.<span class="at">log</span>(<span class="va">event</span>.<span class="at">target</span>)<span class="op">;</span>
<span class="op">};</span></code></pre></div>
</section><section id="directivas-estructurales-i" class="slide level2">
<h2><span class="header-section-number">10.18</span> Directivas estructurales (I)</h2>
<ul>
<li><p>Las <strong>structural directives</strong> interaccionan con la vista actual cambiando la estructura del DOM.</p></li>
<li><p>Pueden añadir, eliminar y reemplazar elementos en el DOM, y se reconocen fácilmente porque van precedidas de un ** ***.</p></li>
</ul>
</section><section id="directivas-estructurales-ii" class="slide level2">
<h2><span class="header-section-number">10.19</span> Directivas estructurales (II)</h2>
<ul>
<li>** *ngIf**: esta directiva añade o elimina un elemento del DOM dependiendo de si se cumple o no la condición.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">mostrar<span class="op">:</span> boolean <span class="op">=</span> <span class="kw">false</span><span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> *ngIf=</span><span class="st">&quot;mostrar&quot;</span><span class="kw">&gt;</span>Este parrafo no se muestra<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section><section id="directivas-estructurales-iii" class="slide level2">
<h2><span class="header-section-number">10.20</span> Directivas estructurales (III)</h2>
<ul>
<li>** *ngFor**: esta directiva repite el elemento en el DOM una vez por cada item que hay en el iterador que se le pasa.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">items<span class="op">:</span> [] <span class="op">=</span> [<span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span>]<span class="op">;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;li</span><span class="ot"> *ngFor=</span><span class="st">&quot;let item of items; let i = index&quot;</span><span class="kw">&gt;</span>{{ item }} - {{ i }}<span class="kw">&lt;/li&gt;</span></code></pre></div>
<ul>
<li>Para poder mostrar el índice del array, usamos <strong>let i = index</strong> donde <strong>index</strong> es una palabra clave que da acceso a dicho índice.</li>
</ul>
</section><section id="directivas-estructurales-iv" class="slide level2">
<h2><span class="header-section-number">10.21</span> Directivas estructurales (IV)</h2>
<ul>
<li>Otra directiva estructural es el <strong>ngSwitch</strong> la cual nos permite mostrar algo dependiendo de su valor. Es algo distinta a las anteriores porque ella no va precedida del ** <em><strong>, sino que son los elementos </strong> </em>ngSwitchCase** y ** <em>ngSwitchDefault<strong> los que llevan el </strong> </em>**.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> [ngSwitch]=</span><span class="st">&quot;value&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;p</span><span class="ot"> *ngSwitchCase=</span><span class="st">&quot;10&quot;</span><span class="kw">&gt;</span>10<span class="kw">&lt;/p&gt;</span>
  <span class="kw">&lt;p</span><span class="ot"> *ngSwitchCase=</span><span class="st">&quot;100&quot;</span><span class="kw">&gt;</span>100<span class="kw">&lt;/p&gt;</span>
  <span class="kw">&lt;p</span><span class="ot"> *ngSwitchDefault</span><span class="kw">&gt;</span>Default<span class="kw">&lt;/p&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></div>
</section><section id="el-prefijo-i" class="slide level2">
<h2><span class="header-section-number">10.22</span> El prefijo * (I)</h2>
<ul>
<li><p>Angular usa el ** * ** para usar las directivas estructurales de una forma más sencilla.</p></li>
<li><p>La etiqueta <code>&lt;template&gt;</code> sirve para tener elementos HTML que a priori no se muestran, pero puede que después se necesiten mostrar usando JavaScript.</p></li>
<li><p>Angular podrá usar ese contenido para mostrarlo con alguna de las directivas estructurales.</p></li>
</ul>
</section><section id="el-prefijo-ii" class="slide level2">
<h2><span class="header-section-number">10.23</span> El prefijo * (II)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="co">&lt;!-- Con el * --&gt;</span>
<span class="kw">&lt;div</span><span class="ot"> *ngIf=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span>Hola mundo<span class="kw">&lt;/div&gt;</span>

<span class="co">&lt;!-- Sin el * --&gt;</span>
<span class="kw">&lt;template</span><span class="ot"> [ngIf]=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div&gt;</span>Hola mundo<span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/template&gt;</span></code></pre></div>
<ul>
<li>Cuando se cumple la condición del <strong>ngIf</strong>, ejecuta el setter de la directiva para mostrar el <code>&lt;div&gt;Hola mundo&lt;/div&gt;</code> que obtiene del <code>&lt;template&gt;</code>. Esto se ve mas claramente en el siguiente punto.</li>
</ul>
</section><section id="crear-una-directiva-estructural-i" class="slide level2">
<h2><span class="header-section-number">10.24</span> Crear una directiva estructural (I)</h2>
<ul>
<li><p>Se puede construir una directiva estructural personalizada.</p></li>
<li><p>Hay que lanzar el comando de Angular-CLI para crear una directiva, lo que crea unos archivos.</p></li>
<li><p>En el archivo TypeScript de la directiva se importan los siguientes elementos que son necesarios: <strong>Input</strong>, <strong>TemplateRef</strong> y <strong>ViewContainerRef</strong>.</p></li>
</ul>
</section><section id="crear-una-directiva-estructural-ii" class="slide level2">
<h2><span class="header-section-number">10.25</span> Crear una directiva estructural (II)</h2>
<ul>
<li><p>El <strong>TemplateRef</strong> te da acceso al contenido que hay dentro del <code>&lt;template&gt;</code>, mientras que el <strong>ViewContainerRef</strong> te da acceso a un elemento que tiene la directiva estructural.</p></li>
<li><p>En otras palabras, el TemplateRef indica que elemento hay que añadir y el ViewContainerRef indica donde hay que añadirlo.</p></li>
<li><p>Para poder usar la directiva con el ** * ** hay que poner el mismo nombre del selector a la función.</p></li>
</ul>
</section><section id="crear-una-directiva-estructural-iii" class="slide level2">
<h2><span class="header-section-number">10.26</span> Crear una directiva estructural (III)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Directive<span class="op">,</span> Input<span class="op">,</span> TemplateRef<span class="op">,</span> ViewContainerRef <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>

@<span class="at">Directive</span>(<span class="op">{</span> <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;[miUnless]&#39;</span><span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> MiUnlessDirective <span class="op">{</span>

  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">tempRef</span><span class="op">:</span> TemplateRef<span class="op">&lt;</span>any<span class="op">&gt;,</span> <span class="kw">private</span> <span class="dt">viewContainer</span><span class="op">:</span> ViewContainerRef) <span class="op">{}</span>

  @<span class="at">Input</span>() set <span class="at">miUnless</span>(<span class="dt">condicion</span><span class="op">:</span> boolean) <span class="op">{</span>
    <span class="cf">if</span> (<span class="op">!</span>condicion) <span class="op">{</span>
      <span class="kw">this</span>.<span class="va">vcRef</span>.<span class="at">createEmbeddedView</span>(<span class="kw">this</span>.<span class="at">tempRef</span>)<span class="op">;</span>
    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span>
      <span class="kw">this</span>.<span class="va">vcRef</span>.<span class="at">clear</span>()<span class="op">;</span>
    <span class="op">}</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;p</span><span class="ot"> *miUnless=</span><span class="st">&quot;true&quot;</span><span class="kw">&gt;</span>Esto no se muestra<span class="kw">&lt;/p&gt;</span></code></pre></div>
</section></section>
<section><section id="servicios-e-inyección-de-dependencias" class="titleslide slide level1"><h1><span class="header-section-number">11</span> Servicios e inyección de dependencias</h1></section><section id="introducción-6" class="slide level2">
<h2><span class="header-section-number">11.1</span> Introducción</h2>
<ul>
<li><p>Los servicios son una pieza fundamental de Angular, todo valor, función o característica que necesita la aplicación (constantes, lógica de negocio...​) se encapsula dentro de los servicios.</p></li>
<li><p>Los servicios son simples clases que se usan para interactuar con la BBDD, acceder a la lógica de negocio entre distintos sitios de la aplicación, para la comunicación entre componentes y clases (por ejemplo emitir un evento y escucharlo en distintos sitios de la aplicación sin tener que construir cadenas de eventos o propiedades).</p></li>
</ul>
</section><section id="creación-de-servicios-i" class="slide level2">
<h2><span class="header-section-number">11.2</span> Creación de servicios (I)</h2>
<ul>
<li>Para crear un servicio se usa el comando de Angular-CLI:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g s miServicio</code></pre></div>
</section><section id="creación-de-servicios-ii" class="slide level2">
<h2><span class="header-section-number">11.3</span> Creación de servicios (II)</h2>
<ul>
<li><p>En el archivo mi-servicio.service.ts aparece <strong><span class="citation" data-cites="Injectable">@Injectable</span>()</strong>.</p></li>
<li><p>Es un decorador que indica que el servicio espera utilizar otros servicios.</p></li>
<li><p>No es necesario ponerlo si el servicio no usa ningún otro servicio.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">class</span> MiServicio <span class="op">{</span>
<span class="co">// ...​</span>
<span class="op">}</span></code></pre></div>
</section><section id="inyección-de-dependencias-i" class="slide level2">
<h2><span class="header-section-number">11.4</span> Inyección de dependencias (I)</h2>
<ul>
<li><p>La <strong>inyección de dependencias</strong> es un mecanismo que proporciona nuevas instancias de una clase.</p></li>
<li><p>La mayoría de las dependencias son servicios y Angular inyecta estos servicios en los componentes que los necesitan.</p></li>
<li><p>Se pueden inyectar las dependencias a través de los constructores de los componentes, las directivas o las clases.</p></li>
</ul>
</section><section id="inyección-de-dependencias-ii" class="slide level2">
<h2><span class="header-section-number">11.5</span> Inyección de dependencias (II)</h2>
<ul>
<li>Para ello se necesita importar lo que queremos inyectar y pasarlo como argumento en el constructor.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> MiServicio <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./mi-servicio.service&#39;</span><span class="op">;</span>
<span class="at">constructor</span>(miServicio<span class="op">:</span> MiServicio) <span class="op">{}</span></code></pre></div>
</section><section id="una-instancia-vs-múltiples-instancias-i" class="slide level2">
<h2><span class="header-section-number">11.6</span> Una instancia vs múltiples instancias (I)</h2>
<ul>
<li><p>Hay que saber si se necesita que solo sea ese componente el que pueda acceder a los datos y funciones que provee ese servicio o se necesita que a parte de ese componente haya otros que puedan acceder a los datos y funciones del servicio.</p></li>
<li><p>Por ejemplo, al implementar una cesta de la compra para un e-commerce, se debería de poder añadir items desde distintos sitios de la aplicación, en este caso tiene sentido que todos los componentes, desde los que se puede añadir items a la cesta, tengan la misma instancia del servicio para que los items que añadas se incluyan en la cesta del usuario.</p></li>
</ul>
</section><section id="una-instancia-vs-múltiples-instancias-ii" class="slide level2">
<h2><span class="header-section-number">11.7</span> Una instancia vs múltiples instancias (II)</h2>
<ul>
<li><p>Con el ejemplo anterior, si en lugar de usar una instancia para todos, usamos distintas instancias en cada uno de los componentes desde los que se pueden añadir los items, cada componente añadiria los items en cestas distintas, las cuales no estarían sincronizadas.</p></li>
<li><p>En el caso de querer varias instancias del servicio, hay que indicarlo en el array de providers de cada componente que lo vaya a usar.</p></li>
</ul>
</section><section id="una-instancia-vs-múltiples-instancias-iii" class="slide level2">
<h2><span class="header-section-number">11.8</span> Una instancia vs múltiples instancias (III)</h2>
<ul>
<li>Por otro lado, si se quiere usar una instancia para varios componentes, basta con añadir el servicio al array de providers de un componente superior que contenga los componentes que lo van a usar. Si se necesita usar en cualquier lugar de la aplicación, la mejor opción es añadirlo en el archivo <strong>app.module.ts</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> MiServicio <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./mi-servicio.service&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
<span class="co">//...​</span>
<span class="dt">providers</span><span class="op">:</span> [MiServicio]
<span class="op">}</span>)</code></pre></div>
</section><section id="múltiples-instancias-i" class="slide level2">
<h2><span class="header-section-number">11.9</span> Múltiples instancias (I)</h2>
<ul>
<li>Ejemplo de un servicio de Log:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g s log</code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">class</span> LogService <span class="op">{</span>
  <span class="at">writeToLog</span>(<span class="dt">logMessage</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="va">console</span>.<span class="at">log</span>(logMessage)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="múltiples-instancias-ii" class="slide level2">
<h2><span class="header-section-number">11.10</span> Múltiples instancias (II)</h2>
<ul>
<li>Para usar este servicio en dos componentes distintos hay que inyectarlo en sus constructores.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-cmp-a&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;input type=&quot;text&quot;&gt;&lt;br /&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onLog()&quot;&gt;Log&lt;/button&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [LogService]
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> CmpAComponent <span class="op">{</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService) <span class="op">{}</span>
<span class="op">}</span></code></pre></div>
</section><section id="múltiples-instancias-iii" class="slide level2">
<h2><span class="header-section-number">11.11</span> Múltiples instancias (III)</h2>
<ul>
<li>Para hacer que escriba en la consola lo que se introduce en el input hay que añadir una referencia en el input para poder pasarle el valor como parámetro en la función onLog. Y hay que implementar la función onLog la cual usara el servicio para mostrar el texto en la consola.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> #input</span><span class="kw">&gt;</span>
<span class="kw">&lt;button</span><span class="ot"> (click)=</span><span class="st">&quot;onLog(input.value)&quot;</span><span class="kw">&gt;</span>Log<span class="kw">&lt;/button&gt;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="at">onLog</span>(value<span class="op">:</span> string) <span class="op">{</span>
  <span class="kw">this</span>.<span class="va">logService</span>.<span class="at">writeToLog</span>(value)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
</section><section id="múltiples-instancias-iv" class="slide level2">
<h2><span class="header-section-number">11.12</span> Múltiples instancias (IV)</h2>
<ul>
<li>Ahora hay que hacer exactamente lo mismo en el segundo componente, el CmpB:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-cmp-b&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;input type=&quot;text&quot; #input&gt;&lt; br&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onLog(input.value)&quot;&gt;Log&lt;/button&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [LogService]
<span class="op">}</span>)

<span class="im">export</span> <span class="kw">class</span> CmpBComponent <span class="op">{</span>
<span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService) <span class="op">{}</span>
  <span class="at">onLog</span>(<span class="dt">value</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">logService</span>.<span class="at">writeToLog</span>(value)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="múltiples-instancias-v" class="slide level2">
<h2><span class="header-section-number">11.13</span> Múltiples instancias (V)</h2>
<ul>
<li><p>Cada componente tiene el LogService en su respectivo providers, por lo que son instancias distintas, pero para el log es indiferente, no es necesario que estén sincronizados.</p></li>
<li><p>Para que los dos componentes usen la misma instancia de un servicio, este habría que añadirlo en el providers del componente padre (en este caso seria el <strong>app.component</strong>), o en el <strong>app.module.ts</strong>.</p></li>
</ul>
</section><section id="una-instancia-i" class="slide level2">
<h2><span class="header-section-number">11.14</span> Una instancia (I)</h2>
<div class="sourceCode"><pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="ex">ng</span> g s data</code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">class</span> DataService <span class="op">{</span>
<span class="kw">private</span> <span class="dt">data</span><span class="op">:</span> string[] <span class="op">=</span> []<span class="op">;</span>
<span class="at">constructor</span>() <span class="op">{</span> <span class="op">}</span>

  <span class="at">addData</span>(<span class="dt">input</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">data</span>.<span class="at">push</span>(input)<span class="op">;</span>
  <span class="op">}</span>

  <span class="at">getData</span>() <span class="op">{</span>
    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">data</span><span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="una-instancia-ii" class="slide level2">
<h2><span class="header-section-number">11.15</span> Una instancia (II)</h2>
<ul>
<li>Este servicio se añade en el providers del <strong>app.component.ts</strong> para que los componentes A y B usen la misma instancia. De esta forma, los datos estarán sincronizados.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Services <span class="er">&amp;</span> Dependency Injection<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;app-cmp-a&gt;&lt;/app-cmp-a&gt;</span>
<span class="kw">&lt;app-cmp-b&gt;&lt;/app-cmp-b&gt;</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> DataService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./data.service&#39;</span><span class="op">;</span>
@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-root&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./app.component.html&#39;</span><span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [DataService]
<span class="op">}</span>)</code></pre></div>
</section><section id="una-instancia-iii" class="slide level2">
<h2><span class="header-section-number">11.16</span> Una instancia (III)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> DataService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./data.service&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-cmp-a&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;input type=&quot;text&quot; #input&gt;</span>
<span class="vs">    &lt;button (click)=&quot;addData(input.value)&quot;&gt;addData&lt;/button&gt;</span>
<span class="vs">    &lt;ul&gt;&lt;li *ngFor=&quot;let item of getData()&quot;&gt;{{item}}&lt;/li&gt;&lt;/ul&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> CmpAComponent <span class="op">{</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">dataService</span><span class="op">:</span> DataService) <span class="op">{</span>  <span class="op">}</span>
  <span class="at">addData</span>(<span class="dt">value</span><span class="op">:</span> string) <span class="op">{</span> <span class="kw">this</span>.<span class="va">dataService</span>.<span class="at">addData</span>(value)<span class="op">;</span> <span class="op">}</span>
  <span class="at">getData</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">items</span> <span class="op">=</span> <span class="kw">this</span>.<span class="va">dataService</span>.<span class="at">getData</span>()<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="inyectando-servicios-en-otros-servicios-i" class="slide level2">
<h2><span class="header-section-number">11.17</span> Inyectando servicios en otros servicios (I)</h2>
<ul>
<li><p>Hasta ahora se han inyectado servicios en componentes, pero hay veces que se necesita insertar un servicio en otro servicio.</p></li>
<li><p>Siguiendo con el ejemplo anterior, se quiere mostrar por la consola cada item nuevo que se añade en el array del DataService.</p></li>
<li><p>Hay que importar e inyectar el LogService en el DataService, y usarlo para mostrar información en la consola de los items que se van añadiendo.</p></li>
</ul>
</section><section id="inyectando-servicios-en-otros-servicios-ii" class="slide level2">
<h2><span class="header-section-number">11.18</span> Inyectando servicios en otros servicios (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">class</span> DataService <span class="op">{</span>
  <span class="kw">private</span> <span class="dt">data</span><span class="op">:</span> string[] <span class="op">=</span> []<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService) <span class="op">{</span> <span class="op">}</span>
  <span class="at">addData</span>(<span class="dt">input</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">data</span>.<span class="at">push</span>(input)<span class="op">;</span>
    <span class="kw">this</span>.<span class="va">logService</span>.<span class="at">writeToLog</span>(<span class="st">&#39;Saved item: &#39;</span> <span class="op">+</span> input)<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">getData</span>() <span class="op">{</span>
    <span class="cf">return</span> <span class="kw">this</span>.<span class="at">data</span><span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="inyectando-servicios-en-otros-servicios-ii-1" class="slide level2">
<h2><span class="header-section-number">11.19</span> Inyectando servicios en otros servicios (II)</h2>
<ul>
<li><p>Esto no funciona, si se prueba se puede ver que da un error en la consola, y esto se debe a que no se le está indicando que a este servicio se le está inyectando un servicio externo.</p></li>
<li><p>Ahora es el momento de añadir la parte del <strong><span class="citation" data-cites="Injectable">@Injectable</span>()</strong>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Injectable <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>

@<span class="at">Injectable</span>()
<span class="im">export</span> <span class="kw">class</span> DataService <span class="op">{</span>
  ...
<span class="op">}</span></code></pre></div>
</section><section id="inyectando-servicios-en-otros-servicios-iii" class="slide level2">
<h2><span class="header-section-number">11.20</span> Inyectando servicios en otros servicios (III)</h2>
<ul>
<li>Ahora se necesita usar el LogService desde el nivel más alto de la aplicación, por lo tanto se añade en el <strong>app.module.ts</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> ... <span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    <span class="va">Componets</span>...
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    <span class="va">Modules</span>...
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [LogService]<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="interacción-entre-componentes-i" class="slide level2">
<h2><span class="header-section-number">11.21</span> Interacción entre componentes (I)</h2>
<ul>
<li><p>Los servicios también se pueden usar para que los componentes interactúen entre ellos sin necesidad de implementar cadenas de eventos a través de los componentes de la aplicación.</p></li>
<li><p>En este caso se va a añadir la funcionalidad para enviar un dato de un componente a otro y que aparezca automáticamente.</p></li>
</ul>
</section><section id="interacción-entre-componentes-ii" class="slide level2">
<h2><span class="header-section-number">11.22</span> Interacción entre componentes (II)</h2>
<ul>
<li>En DataService crear un EventEmitter para emitir el valor.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Injectable<span class="op">,</span> EventEmitter <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>

@<span class="at">Injectable</span>()
<span class="im">export</span> <span class="kw">class</span> DataService <span class="op">{</span>
  pushedData <span class="op">=</span> <span class="kw">new</span> EventEmitter<span class="op">&lt;</span>string<span class="op">&gt;</span>()<span class="op">;</span>
  <span class="kw">private</span> <span class="dt">data</span><span class="op">:</span> string[] <span class="op">=</span> []<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService) <span class="op">{</span> <span class="op">}</span>
  <span class="at">addData</span>(<span class="dt">input</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">data</span>.<span class="at">push</span>(input)<span class="op">;</span>
    <span class="kw">this</span>.<span class="va">logService</span>.<span class="at">writeToLog</span>(<span class="st">&#39;Saved item: &#39;</span> <span class="op">+</span> input)<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">getData</span>() <span class="op">{</span> <span class="cf">return</span> <span class="kw">this</span>.<span class="at">data</span><span class="op">;</span> <span class="op">}</span>
  <span class="at">pushData</span>(<span class="dt">value</span><span class="op">:</span> string) <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">pushedData</span>.<span class="at">emit</span>(value)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="interacción-entre-componentes-iii" class="slide level2">
<h2><span class="header-section-number">11.23</span> Interacción entre componentes (III)</h2>
<ul>
<li><p>Añadimos en el componente A un botón para enviar el valor del input.</p></li>
<li><p>Para ello en la función que se ejecuta al pulsar el botón de enviar llamamos a la función que se ha implementado en el DataService y que se encarga de emitir el dato al componente B.</p></li>
</ul>
</section><section id="interacción-entre-componentes-iv" class="slide level2">
<h2><span class="header-section-number">11.24</span> Interacción entre componentes (IV)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> LogService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./log.service&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> DataService <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./data.service&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-cmp-a&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;input type=&quot;text&quot; #input&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onSend(input.value)&quot;&gt;Send&lt;/button&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> CmpAComponent <span class="op">{</span>
  <span class="at">constructor</span>(
    <span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService<span class="op">,</span>
    <span class="kw">private</span> <span class="dt">dataService</span><span class="op">:</span> DataService) <span class="op">{</span>
  <span class="op">}</span>
  <span class="at">onSend</span>(<span class="dt">value</span><span class="op">:</span> string) <span class="op">{</span> <span class="kw">this</span>.<span class="va">dataService</span>.<span class="at">pushData</span>(value)<span class="op">;</span> <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="interacción-entre-componentes-v" class="slide level2">
<h2><span class="header-section-number">11.25</span> Interacción entre componentes (V)</h2>
<ul>
<li>Y en el componente B hay que subscribirse al evento que se emite en el DataService, es decir que cuando se detecta el emit, se ejecutará la función de callback en la que se va a actualizar el valor de la variable value con el que llega como argumento en el callback.</li>
</ul>
</section><section id="interacción-entre-componentes-vi" class="slide level2">
<h2><span class="header-section-number">11.26</span> Interacción entre componentes (VI)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> ...<span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-cmp-b&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;p&gt;{{value}}&lt;/p&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> CmpBComponent <span class="kw">implements</span> OnInit <span class="op">{</span>
  value <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span>
  <span class="at">constructor</span>(
    <span class="kw">private</span> <span class="dt">logService</span><span class="op">:</span> LogService<span class="op">,</span> 
    <span class="kw">private</span> <span class="dt">dataService</span><span class="op">:</span> DataService) <span class="op">{</span>
  <span class="op">}</span>
  <span class="at">ngOnInit</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">dataService</span>.<span class="va">pushedData</span>.<span class="at">subscribe</span>( data <span class="op">=&gt;</span> <span class="kw">this</span>.<span class="at">value</span> <span class="op">=</span> data )<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section></section>
<section><section id="formularios" class="titleslide slide level1"><h1><span class="header-section-number">12</span> Formularios</h1></section><section id="introducción-7" class="slide level2">
<h2><span class="header-section-number">12.1</span> Introducción</h2>
<ul>
<li><p>Los formularios son una de las partes principales de una aplicación.</p></li>
<li><p>Los formularios se usan para acciones como el log in, la reserva de un vuelo, establecer una reunión...​</p></li>
<li>Angular permite manejar el uso de formularios de dos formas:
<ul>
<li><strong>Template-driven approach</strong></li>
<li><strong>Data-driven approach</strong></li>
</ul></li>
<li><p>Al ser un framework, también da soporte a las validaciones y al control de errores.</p></li>
</ul>
</section><section id="formulario-basado-en-plantillas-i" class="slide level2">
<h2><span class="header-section-number">12.2</span> Formulario basado en plantillas (I)</h2>
<p>Una vez que se tiene la estructura de un formulario creada, vamos a ir viendo como se va configurando el formulario usando Angular.</p>
</section><section id="formulario-basado-en-plantillas-ii" class="slide level2">
<h2><span class="header-section-number">12.3</span> Formulario basado en plantillas (II)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> name=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> name=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-iii" class="slide level2">
<h2><span class="header-section-number">12.4</span> Formulario basado en plantillas (III)</h2>
<ul>
<li><p>Para empezar hay que indicarle que cuando detecte el evento de <strong>submit</strong> con <strong>(ngSubmit)</strong> ejecute la función correspondiente implementada en el archivo <strong>template-driven.component.ts</strong>.</p></li>
<li><p>A dicha función habrá que pasarle el formulario para poder acceder a los datos que se van a rellenar, por lo que hay que crear una referencia de todo el formulario para lo que usamos la directiva <strong>ngForm</strong>.</p></li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
<span class="co">&lt;!-- ...​ --&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-iv" class="slide level2">
<h2><span class="header-section-number">12.5</span> Formulario basado en plantillas (IV)</h2>
<ul>
<li>La directiva <strong>ngForm</strong> hay que importarla para poder usarla.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> NgForm <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-template-driven&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./template-driven.component.html&#39;</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> TemplateDrivenComponent <span class="op">{</span>
  <span class="at">onSubmit</span>(<span class="dt">form</span><span class="op">:</span> NgForm) <span class="op">{</span>
    <span class="co">// ...​</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-v" class="slide level2">
<h2><span class="header-section-number">12.6</span> Formulario basado en plantillas (V)</h2>
<ul>
<li>Se puede realizar algunas validaciones usando las que nos proporciona HTML, como <strong>required</strong> y <strong>pattern</strong>.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> name=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> name=</span><span class="st">&quot;password&quot;</span>
<span class="ot">     pattern=</span><span class="st">&quot;RegExp&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-vi" class="slide level2">
<h2><span class="header-section-number">12.7</span> Formulario basado en plantillas (VI)</h2>
<ul>
<li><p>Al inspeccionar cualquier input del form, se puede ver que tiene algunas clases asignadas que no le hemos puesto, sino que se las ha puesto- Angular.</p></li>
<li><p>Estas clases se pueden aprovechar para poner estilos según el estado del input.</p></li>
</ul>
</section><section id="formulario-basado-en-plantillas-vii" class="slide level2">
<h2><span class="header-section-number">12.8</span> Formulario basado en plantillas (VII)</h2>
<ul>
<li><strong>ng-valid</strong>: El campo es válido.</li>
<li><strong>ng-invalid</strong>: El campo no es válido.</li>
<li><strong>ng-touched</strong>: Se ha clicado en el campo.</li>
<li><strong>ng-touched</strong>: No se ha clicado en el campo.</li>
<li><strong>ng-pristine</strong>: Tiene el valor por defecto.</li>
<li><strong>ng-dirty</strong>: No tiene el valor por defecto.</li>
</ul>
</section><section id="formulario-basado-en-plantillas-vii-1" class="slide level2">
<h2><span class="header-section-number">12.9</span> Formulario basado en plantillas (VII)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-template-driven&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./template-driven.component.html&#39;</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> [<span class="vs">`.form-control.ng-invalid {</span>
<span class="vs">    border: 1px solid red;</span>
<span class="vs">  }`</span>]
<span class="op">}</span>)</code></pre></div>
</section><section id="formulario-basado-en-plantillas-viii" class="slide level2">
<h2><span class="header-section-number">12.10</span> Formulario basado en plantillas (VIII)</h2>
<ul>
<li><p>Se puede poner valores por defecto en los campos del formulario, para ello en el typescript hay que crearse una estructura de datos con los valores por defecto.</p></li>
<li><p>Y en la plantilla hay que usar <strong>[ngModel]=&quot;dato&quot;</strong> para acceder a esos datos y asignarle el valor al campo.</p></li>
</ul>
</section><section id="formulario-basado-en-plantillas-ix" class="slide level2">
<h2><span class="header-section-number">12.11</span> Formulario basado en plantillas (IX)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">class</span> TemplateDrivenComponent <span class="op">{</span>

  usuario <span class="op">=</span> <span class="op">{</span>
    <span class="dt">nombre</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span>
    <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span>
    <span class="dt">password</span><span class="op">:</span> <span class="st">&#39;&#39;</span>
  <span class="op">};</span>

  <span class="at">onSubmit</span>(<span class="dt">form</span><span class="op">:</span> NgForm) <span class="op">{</span>
    <span class="co">// ...</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-x" class="slide level2">
<h2><span class="header-section-number">12.12</span> Formulario basado en plantillas (X)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> name=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> required</span>
<span class="ot">    [ngModel]=</span><span class="st">&quot;usuario.nombre&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="ot"> required</span>
<span class="ot">    [ngModel]=</span><span class="st">&quot;usuario.email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> name=</span><span class="st">&quot;password&quot;</span>
<span class="ot">    [ngModel]=</span><span class="st">&quot;usuario.password&quot;</span><span class="ot"> pattern=</span><span class="st">&quot;RegExp&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-xi" class="slide level2">
<h2><span class="header-section-number">12.13</span> Formulario basado en plantillas (XI)</h2>
<ul>
<li>Se puede usar el <strong>two-way binding</strong> con <strong>ngModel</strong> para actualizar los datos una vez que se realiza el submit.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> name=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> required</span>
<span class="ot">    [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.nombre&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="ot"> required</span>
<span class="ot">    [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> name=</span><span class="st">&quot;password&quot;</span>
<span class="ot">    [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.password&quot;</span><span class="ot"> pattern=</span><span class="st">&quot;RegExp&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-xii" class="slide level2">
<h2><span class="header-section-number">12.14</span> Formulario basado en plantillas (XII)</h2>
<ul>
<li>Angular da la posibilidad de agrupar datos del mismo tipo usando la directiva <strong>ngModelGroup</strong> la cual tiene que ir dentro de un elemento hijo del elemento que tiene la directiva <strong>ngForm</strong> y tiene que envolver los campos que se desean agrupar.</li>
</ul>
</section><section id="formulario-basado-en-plantillas-xiii" class="slide level2">
<h2><span class="header-section-number">12.15</span> Formulario basado en plantillas (XIII)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> ngModelGroup=</span><span class="st">&quot;datosUsuario&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> name=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> required</span>
<span class="ot">      [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.nombre&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="ot"> required</span>
<span class="ot">      [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> name=</span><span class="st">&quot;password&quot;</span>
<span class="ot">    [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.password&quot;</span><span class="ot"> pattern=</span><span class="st">&quot;RegExp&quot;</span><span class="ot"> required</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-xiv" class="slide level2">
<h2><span class="header-section-number">12.16</span> Formulario basado en plantillas (XIV)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">export</span> <span class="kw">class</span> TemplateDrivenComponent <span class="op">{</span>
  usuario <span class="op">=</span> <span class="op">{</span>
    <span class="dt">datosUsuario</span><span class="op">:</span> <span class="op">{</span>
      <span class="dt">nombre</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span>
      <span class="dt">email</span><span class="op">:</span> <span class="st">&#39;&#39;</span>
    <span class="op">},</span>
    <span class="dt">password</span><span class="op">:</span> <span class="st">&#39;&#39;</span>
  <span class="op">};</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-plantillas-xv" class="slide level2">
<h2><span class="header-section-number">12.17</span> Formulario basado en plantillas (XV)</h2>
<ul>
<li><p>Se puede usar la directiva *ngIf para mostrar mensajes cuando un campo es invalido, poniendo una referencia que se usa en la condición de la directiva.</p></li>
<li><p>También se pueden usar property bindings para deshabilitar los botones de envio de los formularios.</p></li>
</ul>
</section><section id="formulario-basado-en-plantillas-xvi" class="slide level2">
<h2><span class="header-section-number">12.18</span> Formulario basado en plantillas (XVI)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Template Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit(f)&quot;</span><span class="ot"> #f=</span><span class="st">&quot;ngForm&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> ngModelGroup=</span><span class="st">&quot;datosUsuario&quot;</span><span class="kw">&gt;</span>
    ...
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> name=</span><span class="st">&quot;email&quot;</span><span class="ot"> required</span>
<span class="ot">      [</span><span class="er">(ngModel)]</span><span class="ot">=</span><span class="st">&quot;usuario.email&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div</span><span class="ot"> *ngIf=</span><span class="st">&quot;!email.valid&quot;</span><span class="kw">&gt;</span>Invalid Email<span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  ...
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> [disabled]=</span><span class="st">&quot;!f.valid&quot;</span><span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-i" class="slide level2">
<h2><span class="header-section-number">12.19</span> Formulario basado en datos (I)</h2>
<ul>
<li><p>Los formularios basados en datos o reactivos facilitan la gestión de los datos puesto que se controlan directamente desde la clase del componente.</p></li>
<li><p>De esta forma el componente tiene acceso a los datos y a la estructura del formulario, por lo tanto el componente puede reaccionar a los cambios que observa.</p></li>
<li><p>Las actualizaciones de datos y validaciones son mas rápidas.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-ii" class="slide level2">
<h2><span class="header-section-number">12.20</span> Formulario basado en datos (II)</h2>
<ul>
<li><p>Con este tipo de formularios hay que crear un árbol de objetos <strong>FormControl</strong> en la clase del componente y asignarlos a los campos correspondientes en la plantilla.</p></li>
<li><p>Para empezar hay que inicializar en el constructor la propiedad que va a contener el formulario con los datos por defecto.</p></li>
<li><p>Hay que importar <strong>FormGroup</strong> que agrupa los datos, en este caso todos los datos del formulario son una agrupación, y cada uno de los campos que hay en esta agrupación son <strong>FormControl</strong>.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-iii" class="slide level2">
<h2><span class="header-section-number">12.21</span> Formulario basado en datos (III)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> FormGroup<span class="op">,</span> FormControl <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-data-driven&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./data-driven.component.html&#39;</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> DataDrivenComponent <span class="op">{</span>
  <span class="dt">miFormulario</span><span class="op">:</span> FormGroup<span class="op">;</span>
  <span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
      <span class="st">&#39;nombre&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()<span class="op">,</span>
      <span class="st">&#39;email&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()<span class="op">,</span>
      <span class="st">&#39;password&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()
    <span class="op">}</span>)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-iv" class="slide level2">
<h2><span class="header-section-number">12.22</span> Formulario basado en datos (IV)</h2>
<ul>
<li><p>El nombre de las claves es importante porque es lo que usa Angular para detectar que campo asigna a cada clave del <strong>FormGroup</strong>.</p></li>
<li><p>Al minificar los archivos se les puede cambiar el nombre y en caso de que no coincidan dejaría de funcionar la aplicación.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-v" class="slide level2">
<h2><span class="header-section-number">12.23</span> Formulario basado en datos (V)</h2>
<ul>
<li><p>Para sincronizar la plantilla con los datos hay que indicar al formulario con un property binding donde se encuentran los datos.</p></li>
<li><p>Y para indicar que dato corresponde a que campo del formulario se usa la directiva <strong>formControlName</strong>.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-vi" class="slide level2">
<h2><span class="header-section-number">12.24</span> Formulario basado en datos (VI)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Data Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> [formGroup]=</span><span class="st">&quot;miFormulario&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-vii" class="slide level2">
<h2><span class="header-section-number">12.25</span> Formulario basado en datos (VII)</h2>
<ul>
<li><p>Las directivas como el formControlName solo se pueden usar una vez que se ha importado el modulo que las contiene, <strong>ReactiveFormsModule</strong>.</p></li>
<li><p>Este modulo se importa en el <strong>app.module.ts</strong>.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-viii" class="slide level2">
<h2><span class="header-section-number">12.26</span> Formulario basado en datos (VIII)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> ...<span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> ReactiveFormsModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    AppComponent<span class="op">,</span>
    DataDrivenComponent
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    BrowserModule<span class="op">,</span>
    FormsModule<span class="op">,</span>
    HttpModule<span class="op">,</span>
    ReactiveFormsModule
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> []<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-ix" class="slide level2">
<h2><span class="header-section-number">12.27</span> Formulario basado en datos (IX)</h2>
<ul>
<li>Para realizar el submit se usa el ngSubmit como en el template-driven approach, salvo que al tener los datos en el constructor del componente no es necesario crear la referencia al formulario porque ya se pueden acceder a ellos.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Data Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> [formGroup]=</span><span class="st">&quot;miFormulario&quot;</span><span class="ot"> (ngSubmit)=</span><span class="st">&quot;onSubmit()&quot;</span><span class="kw">&gt;</span>
<span class="co">&lt;!-- ...​ --&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-x" class="slide level2">
<h2><span class="header-section-number">12.28</span> Formulario basado en datos (X)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> FormGroup<span class="op">,</span> FormControl <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-data-driven&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./data-driven.component.html&#39;</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> DataDrivenComponent <span class="op">{</span>
  <span class="dt">miFormulario</span><span class="op">:</span> FormGroup<span class="op">;</span>

  <span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
      <span class="st">&#39;nombre&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()<span class="op">,</span>
      <span class="st">&#39;email&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()<span class="op">,</span>
      <span class="st">&#39;password&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>()
    <span class="op">}</span>)<span class="op">;</span>
  <span class="op">}</span>

  <span class="at">onSubmit</span>() <span class="op">{</span>
    <span class="co">// ...</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xi" class="slide level2">
<h2><span class="header-section-number">12.29</span> Formulario basado en datos (XI)</h2>
<ul>
<li><p>Las validaciones también son distintas con este método, puesto que el formulario se configura desde el constructor del componente en lugar de hacerlo en la plantilla.</p></li>
<li><p>A los FormControl se le pueden pasar parámetros, donde el primero es el valor por defecto que se le quiera poner y el segundo parámetro son las validaciones para ese campo.</p></li>
<li><p>Las validaciones usan <strong>Validators</strong> que se importa desde <strong><span class="citation" data-cites="angular/forms">@angular/forms</span></strong>.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-xii" class="slide level2">
<h2><span class="header-section-number">12.30</span> Formulario basado en datos (XII)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">
<span class="at">constructor</span>() <span class="op">{</span>
  <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
    <span class="st">&#39;nombre&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)<span class="op">,</span>
    <span class="st">&#39;email&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> [<span class="va">Validators</span>.<span class="at">required</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">pattern</span>(<span class="st">&quot;RegExp&quot;</span>)])<span class="op">,</span>
    <span class="st">&#39;password&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)
  <span class="op">}</span>)<span class="op">;</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xii-1" class="slide level2">
<h2><span class="header-section-number">12.31</span> Formulario basado en datos (XII)</h2>
<ul>
<li><p>En caso de que se necesiten mas de una validación, el segundo parámetro será un array de Validators.</p></li>
<li><p>Podemos encontrar mas sobre validators <a href="https://angular.io/docs/ts/latest/api/forms/index/Validators-class.html">aquí</a>.</p></li>
<li><p>Ahora se puede deshabilitar el botón de Enviar y mostrar el mensaje de error cuando falla la validación del email de una forma mas sencialla porque no se necesita la referencia al formulario porque se puede acceder a la propiedad del componente.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-xiv" class="slide level2">
<h2><span class="header-section-number">12.32</span> Formulario basado en datos (XIV)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Data Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> [formGroup]=</span><span class="st">&quot;miFormulario&quot;</span><span class="kw">&gt;</span>
  ...
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> *ngIf=</span><span class="st">&quot;!miFormulario.controls[&#39;email&#39;].valid&quot;</span><span class="kw">&gt;</span>
    Email invalido<span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  ...
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span><span class="ot"> [disabled]=</span><span class="st">&quot;!miFormulario.valid&quot;</span><span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xv" class="slide level2">
<h2><span class="header-section-number">12.33</span> Formulario basado en datos (XV)</h2>
<ul>
<li>Para grupar los datos hay que crear un nuevo FormGroup que los contenga e indicarlo en la plantilla usando la directiva <strong>formGroupName=&quot;nombreGrupoDatos&quot;</strong> en un elemento que envuelva esos datos.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">  <span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
      <span class="st">&#39;datosUsuario&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
        <span class="st">&#39;nombre&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)<span class="op">,</span>
        <span class="st">&#39;email&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> [<span class="va">Validators</span>.<span class="at">required</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">pattern</span>(RegExp)])
      <span class="op">}</span>)<span class="op">,</span>
      <span class="st">&#39;password&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)
    <span class="op">}</span>)<span class="op">;</span>
  <span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xvi" class="slide level2">
<h2><span class="header-section-number">12.34</span> Formulario basado en datos (XVI)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;h1&gt;</span>Data Driven<span class="kw">&lt;/h1&gt;</span>
<span class="kw">&lt;form</span><span class="ot"> [formGroup]=</span><span class="st">&quot;miFormulario&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> formGroupName=</span><span class="st">&quot;datosUsuario&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>Nombre<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;nombre&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;nombre&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>E-Mail<span class="kw">&lt;/label&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> id=</span><span class="st">&quot;email&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;email&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;label</span><span class="ot"> for=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>Password<span class="kw">&lt;/label&gt;</span>
  <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;password&quot;</span><span class="ot"> id=</span><span class="st">&quot;password&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;password&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;submit&quot;</span> <span class="kw">&gt;</span>Enviar<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/form&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xvii" class="slide level2">
<h2><span class="header-section-number">12.35</span> Formulario basado en datos (XVII)</h2>
<ul>
<li>No hay que olvidar cambiar la expresión en la directiva estructural que muestra el mensaje de correo invalido, porque ahora hay que añadir el nuevo nivel (<strong>.controls['datosUsuario']</strong>) para acceder al email.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> *ngIf=</span><span class="st">&quot;!miFormulario.controls[&#39;datosUsuario&#39;].controls[&#39;email&#39;].valid&quot;</span><span class="kw">&gt;</span>
  Email invalido<span class="kw">&lt;/div&gt;</span></code></pre></div>
</section><section id="formulario-basado-en-datos-ixx" class="slide level2">
<h2><span class="header-section-number">12.36</span> Formulario basado en datos (IXX)</h2>
<ul>
<li><p>Para gestionar los arrays se usa el FormArray, el cual representa un array de elementos del formulario.</p></li>
<li><p>En la plantilla hay que asignar la directiva <strong>formArrayName=&quot;arrayDeDatos&quot;</strong> a un elemento que envuelva los datos.</p></li>
<li><p>Al ser un array hay que indicar en el formControlName el indice del array en lugar de la clave usada.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-xx" class="slide level2">
<h2><span class="header-section-number">12.37</span> Formulario basado en datos (XX)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;form</span><span class="ot"> [formGroup]=</span><span class="st">&quot;miFormulario&quot;</span><span class="kw">&gt;</span>
...
<span class="kw">&lt;div</span><span class="ot"> formArrayName=</span><span class="st">&quot;hobbies&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;h3&gt;</span>Hobbies<span class="kw">&lt;/h3&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;form-group&quot;</span> 
<span class="ot">    *ngFor=</span><span class="st">&quot;let hobby of miFormulario.controls[&#39;hobbies&#39;].controls; </span>
<span class="st">      let i = index&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;input</span><span class="ot"> type=</span><span class="st">&quot;text&quot;</span><span class="ot"> formControlName=</span><span class="st">&quot;{{i}}&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;button</span><span class="ot"> type=</span><span class="st">&quot;button&quot;</span><span class="ot"> (click)=</span><span class="st">&quot;onAddHobby()&quot;</span><span class="kw">&gt;</span>Añadir Hobby<span class="kw">&lt;/button&gt;</span>
<span class="kw">&lt;/div&gt;</span>
...</code></pre></div>
</section><section id="formulario-basado-en-datos-xxi" class="slide level2">
<h2><span class="header-section-number">12.38</span> Formulario basado en datos (XXI)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-data-driven&#39;</span><span class="op">,</span>
  <span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./data-driven.component.html&#39;</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> DataDrivenComponent <span class="op">{</span>
  <span class="dt">miFormulario</span><span class="op">:</span> FormGroup<span class="op">;</span>
  <span class="at">constructor</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
      <span class="st">&#39;datosUsuario&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormGroup</span>(<span class="op">{</span>
        <span class="st">&#39;nombre&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)<span class="op">,</span>
        <span class="st">&#39;email&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> [<span class="va">Validators</span>.<span class="at">required</span><span class="op">,</span> 
            <span class="va">Validators</span>.<span class="at">pattern</span>(RegExp)])
      <span class="op">}</span>)<span class="op">,</span>
      <span class="st">&#39;password&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)<span class="op">,</span>
      <span class="st">&#39;hobbies&#39;</span><span class="op">:</span> <span class="kw">new</span> <span class="at">FormArray</span>([
          <span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;Cocinar&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>)
      ])
    <span class="op">}</span>)<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">onSubmit</span>() <span class="op">{</span> ...  <span class="op">}</span>
  <span class="at">onAddHobby</span>() <span class="op">{</span>
    (<span class="op">&lt;</span>FormArray<span class="op">&gt;</span><span class="kw">this</span>.<span class="va">miFormulario</span>.<span class="at">controls</span>[<span class="st">&#39;hobbies&#39;</span>])
        .<span class="at">push</span>(<span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>))<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xxii" class="slide level2">
<h2><span class="header-section-number">12.39</span> Formulario basado en datos (XXII)</h2>
<ul>
<li><p>Hay que realizar un cast (<code>&lt;FormArray&gt;variable</code>) para que nos permita usar el push del FormArray.</p></li>
<li><p>Y para evitar que no se rellene el hobby, se le añade la validación <strong>required</strong> y se le pone como valor por defecto un <strong>''</strong>.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-xxiii" class="slide level2">
<h2><span class="header-section-number">12.40</span> Formulario basado en datos (XXIII)</h2>
<ul>
<li><p>Hay otra forma de crear los formularios, y es usando el <strong>FormBuilder</strong>, el cual se tiene que inyectar en el constructor para poder usarlo.</p></li>
<li><p>De esta forma no hace falta crear los elementos del formulario.</p></li>
</ul>
</section><section id="formulario-basado-en-datos-xxix" class="slide level2">
<h2><span class="header-section-number">12.41</span> Formulario basado en datos (XXIX)</h2>
<ul>
<li>Hay que sustituir:</li>
<li>los <strong>new FormGroup()</strong> por <strong>formBuilder.group()</strong></li>
<li>los <strong>new FormArray()</strong> por <strong>formBuilder.array()</strong></li>
<li>los <strong>new FormControl()</strong> por <strong>[]</strong></li>
</ul>
</section><section id="formulario-basado-en-datos-xxx" class="slide level2">
<h2><span class="header-section-number">12.42</span> Formulario basado en datos (XXX)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript">@<span class="at">Component</span>(<span class="op">{</span>
<span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-data-driven&#39;</span><span class="op">,</span>
<span class="dt">templateUrl</span><span class="op">:</span> <span class="st">&#39;./data-driven.component.html&#39;</span>
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> DataDrivenComponent <span class="op">{</span>
  <span class="dt">miFormulario</span><span class="op">:</span> FormGroup<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">formBuilder</span><span class="op">:</span> FormBuilder) <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">miFormulario</span> <span class="op">=</span> <span class="va">formBuilder</span>.<span class="at">group</span>(<span class="op">{</span>
      <span class="st">&#39;datosUsuario&#39;</span><span class="op">:</span> <span class="va">formBuilder</span>.<span class="at">group</span>(<span class="op">{</span>
        <span class="st">&#39;nombre&#39;</span><span class="op">:</span> [<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>]<span class="op">,</span>
        <span class="st">&#39;email&#39;</span><span class="op">:</span> [<span class="st">&#39;&#39;</span><span class="op">,</span> [<span class="va">Validators</span>.<span class="at">required</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">pattern</span>(RegExp)]]
      <span class="op">}</span>)<span class="op">,</span>
      <span class="st">&#39;password&#39;</span><span class="op">:</span> [<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>]<span class="op">,</span>
      <span class="st">&#39;hobbies&#39;</span><span class="op">:</span> <span class="va">formBuilder</span>.<span class="at">array</span>([
        [<span class="st">&#39;Cocinar&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>]
      ])
    <span class="op">}</span>)<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">onSubmit</span>() <span class="op">{</span> ...  <span class="op">}</span>
  <span class="at">onAddHobby</span>() <span class="op">{</span>
    (<span class="op">&lt;</span>FormArray<span class="op">&gt;</span><span class="kw">this</span>.<span class="va">miFormulario</span>.<span class="at">controls</span>[<span class="st">&#39;hobbies&#39;</span>])
        .<span class="at">push</span>(<span class="kw">new</span> <span class="at">FormControl</span>(<span class="st">&#39;&#39;</span><span class="op">,</span> <span class="va">Validators</span>.<span class="at">required</span>))<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="formulario-basado-en-datos-xxxi" class="slide level2">
<h2><span class="header-section-number">12.43</span> Formulario basado en datos (XXXI)</h2>
<ul>
<li><p>La aplicación debería de seguir funcionando de esta forma.</p></li>
<li><p>Para resetear un formulario basta con usar <strong>miFormulario.reset()</strong>.</p></li>
</ul>
</section></section>
<section><section id="routing" class="titleslide slide level1"><h1><span class="header-section-number">13</span> Routing</h1></section><section id="introducción-i-1" class="slide level2">
<h2><span class="header-section-number">13.1</span> Introducción (I)</h2>
<ul>
<li><p>Las rutas permiten cambiar entre las distintas secciones de la aplicación, y dependiendo de la ruta se cargan unos componentes u otros.</p></li>
<li><p>Angular Router parsea la URL e intenta identificar el componente que tiene que cargar teniendo en cuenta los datos que van en la ruta en caso de que los tenga.</p></li>
<li><p>Para poder usar las rutas hay que configurar el proyecto para poder cambiar de sección desde cualquier parte de la aplicación.</p></li>
</ul>
</section><section id="configuración-i" class="slide level2">
<h2><span class="header-section-number">13.2</span> Configuración (I)</h2>
<ul>
<li><p>Para empezar hay que crear un archivo de rutas <strong>app.routing.ts</strong> donde se van a configurar las rutas.</p></li>
<li><p>Hay que importar <strong>Routes</strong> desde <strong><span class="citation" data-cites="angular/router">@angular/router</span></strong>.</p></li>
</ul>
</section><section id="configuración-ii" class="slide level2">
<h2><span class="header-section-number">13.3</span> Configuración (II)</h2>
<ul>
<li><p>Las rutas se guardan en un array (de tipo Routes) de objetos javascript donde cada objeto representa una ruta.</p></li>
<li>Cada objeto va a contener como mínimo:
<ul>
<li><strong>path:</strong> forma de la URL. En el caso de la ruta <strong>home</strong> se deja como un string vacío.</li>
<li><strong>component:</strong> el componente que se va a mostrar cuando estemos en esa URL. Los componentes hay que importarlos.</li>
</ul></li>
</ul>
</section><section id="configuración-iii" class="slide level2">
<h2><span class="header-section-number">13.4</span> Configuración (III)</h2>
<ul>
<li><p>Para que las rutas estén disponibles en toda la aplicación hay que exportarlas para ponerlas en el archivo <strong>app.modules.ts</strong>.</p></li>
<li><p>Para el ejemplo siguiente, necesitamos crear un componente <strong>home</strong> en la carpeta app, un componente <strong>usuario</strong> y dentro de la carpeta usuario, dos componentes mas, <strong>usuario-info</strong> y <strong>editar-usuario</strong>.</p></li>
</ul>
</section><section id="configuración-iv" class="slide level2">
<h2><span class="header-section-number">13.5</span> Configuración (IV)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes<span class="op">,</span> RouterModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>

<span class="kw">const</span> APP\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;usuario&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioComponent<span class="op">},</span>
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> HomeComponent<span class="op">}</span>
]<span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> routing <span class="op">=</span> <span class="va">RouterModule</span>.<span class="at">forRoot</span>(APP\_ROUTES)<span class="op">;</span></code></pre></div>
</section><section id="configuración-v" class="slide level2">
<h2><span class="header-section-number">13.6</span> Configuración (V)</h2>
<ul>
<li>Hay que importar las rutas en el <strong>app.module.ts</strong>:</li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> BrowserModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> NgModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> FormsModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HttpModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/http&#39;</span><span class="op">;</span>

<span class="im">import</span> <span class="op">{</span> AppComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/editar-usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> routing <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.routing&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    AppComponent<span class="op">,</span>
    UsuarioComponent<span class="op">,</span>
    EditarUsuarioComponent<span class="op">,</span>
    UsuarioInfoComponent<span class="op">,</span>
    HomeComponent
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    BrowserModule<span class="op">,</span>
    FormsModule<span class="op">,</span>
    HttpModule<span class="op">,</span>
    routing
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> []<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="configuración-vi" class="slide level2">
<h2><span class="header-section-number">13.7</span> Configuración (VI)</h2>
<ul>
<li><p>Ahora mismo debería de fallar porque faltaría decirle donde se tiene que renderizar el componente.</p></li>
<li><p>Para ello hay que usar la etiqueta <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> en el sitio donde se quiere mostrar el componente correspondiente a la ruta.</p></li>
</ul>
</section><section id="configuración-vii" class="slide level2">
<h2><span class="header-section-number">13.8</span> Configuración (VII)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;container&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;col-md-10&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
    <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></div>
</section><section id="configuración-viii" class="slide level2">
<h2><span class="header-section-number">13.9</span> Configuración (VIII)</h2>
<ul>
<li><p>Ya no tiene que fallar, sino que debería de mostrar el componente.</p></li>
<li><p>Añadimos unos links para poder navegar entre secciones.</p></li>
</ul>
</section><section id="enlaces-i" class="slide level2">
<h2><span class="header-section-number">13.10</span> Enlaces (I)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;container&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;col-md-10&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;h1&gt;</span>Hello World!<span class="kw">&lt;/h1&gt;</span>
      <span class="kw">&lt;hr&gt;</span>
      <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/&quot;</span><span class="kw">&gt;</span>Home<span class="kw">&lt;/a&gt;</span> |
      <span class="kw">&lt;a</span><span class="ot"> href=</span><span class="st">&quot;/usuario&quot;</span><span class="kw">&gt;</span>Usuario<span class="kw">&lt;/a&gt;</span>
      <span class="kw">&lt;hr&gt;</span>
      <span class="kw">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
    <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></div>
</section><section id="enlaces-ii" class="slide level2">
<h2><span class="header-section-number">13.11</span> Enlaces (II)</h2>
<ul>
<li><p>Al hacer click sobre cualquiera de los dos enlaces cambia de componente, pero también recarga toda la página, y eso es algo feo y poco usable.</p></li>
<li><p>En lugar de recargar la página debería cambiar de componente.</p></li>
<li><p>Por supuesto, Angular es capaz de hacerlo. En lugar de <strong>href</strong> hay que usar la directiva <strong>routerLink</strong>.</p></li>
</ul>
</section><section id="enlaces-iii" class="slide level2">
<h2><span class="header-section-number">13.12</span> Enlaces (III)</h2>
<div class="sourceCode"><pre class="sourceCode html"><code class="sourceCode html"><span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;container&quot;</span><span class="kw">&gt;</span>
  <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;row&quot;</span><span class="kw">&gt;</span>
    <span class="kw">&lt;div</span><span class="ot"> class=</span><span class="st">&quot;col-md-10&quot;</span><span class="kw">&gt;</span>
      <span class="kw">&lt;h1&gt;</span>Hello World!<span class="kw">&lt;/h1&gt;</span>
      <span class="kw">&lt;hr&gt;</span>
      <span class="kw">&lt;a</span><span class="ot"> [routerLink]=</span><span class="st">&quot;[&#39;&#39;]&quot;</span><span class="kw">&gt;</span>Home<span class="kw">&lt;/a&gt;</span> |
      <span class="kw">&lt;a</span><span class="ot"> [routerLink]=</span><span class="st">&quot;[&#39;usuario&#39;]&quot;</span><span class="kw">&gt;</span>Usuario<span class="kw">&lt;/a&gt;</span>
      <span class="kw">&lt;hr&gt;</span>
      <span class="kw">&lt;router-outlet&gt;&lt;/router-outlet&gt;</span>
    <span class="kw">&lt;/div&gt;</span>
  <span class="kw">&lt;/div&gt;</span>
<span class="kw">&lt;/div&gt;</span></code></pre></div>
</section><section id="enlaces-iv" class="slide level2">
<h2><span class="header-section-number">13.13</span> Enlaces (IV)</h2>
<ul>
<li><p>Entre los corchetes se encuentran los segmentos de la URL, donde cada segmento es aquello que va despues de cada <strong>/</strong>.</p></li>
<li><p>Por ejemplo en una ruta como <strong>localhost:4200/usuario/10</strong> habría dos segmentos, [&quot;usuario&quot;, &quot;10&quot;].</p></li>
<li><p>Ahora al navegar por los links debería de cambiar el componente sin recargar la página.</p></li>
</ul>
</section><section id="enlaces-v" class="slide level2">
<h2><span class="header-section-number">13.14</span> Enlaces (V)</h2>
<ul>
<li>Se pueden usar rutas absolutas (con <strong>/</strong>) o rutas relativas (sin <strong>/</strong>).</li>
</ul>
</section><section id="enlaces-vi" class="slide level2">
<h2><span class="header-section-number">13.15</span> Enlaces (VI)</h2>
<ul>
<li>Si estamos en la ruta de inicio (<strong>localhost:4200/home</strong>) y vamos a la ruta del usuario:
<ul>
<li><strong>/usuario</strong> va a <strong>localhost:4200/usuario</strong>.</li>
<li><strong>usuario</strong> va a <strong>localhost:4200/usuario</strong>.</li>
</ul></li>
</ul>
</section><section id="enlaces-vii" class="slide level2">
<h2><span class="header-section-number">13.16</span> Enlaces (VII)</h2>
<ul>
<li>Pero si estamos en la ruta <strong>localhost:4200/usuario</strong>:
<ul>
<li><strong>/usuario</strong> va a <strong>localhost:4200/usuario</strong>, es decir, que se queda donde está.</li>
<li><strong>usuario</strong> va a <strong>localhost:4200/usuario/usuario</strong>.</li>
</ul></li>
</ul>
</section><section id="enlaces-viii" class="slide level2">
<h2><span class="header-section-number">13.17</span> Enlaces (VIII)</h2>
<ul>
<li>Cuando ponemos en el segmento <strong>/</strong> indica que la ruta comienza después del dominio.</li>
</ul>
</section><section id="navegación-por-código-i" class="slide level2">
<h2><span class="header-section-number">13.18</span> Navegación por código (I)</h2>
<ul>
<li><p>Hay algunos casos que se necesita navegar a otra ruta sin pinchar en un link, sino que se necesita hacer la navegación a través del código, por ejemplo cuando te registras en una página te redirige a la ruta de inicio.</p></li>
<li><p>Para ello hay que usar el método <strong>navigate</strong> del router.</p></li>
<li><p>Este método tiene como argumento un array de segmentos, por lo que actúa de la misma forma que el <strong>routerLink</strong>.</p></li>
</ul>
</section><section id="navegación-por-código-ii" class="slide level2">
<h2><span class="header-section-number">13.19</span> Navegación por código (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Router <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-usuario&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h3&gt;Usuario&lt;/h3&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onNavigate()&quot;&gt;Ir a inicio&lt;/button&gt;</span>
<span class="vs">    &lt;hr&gt;{{id}}&lt;hr&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> UsuarioComponent <span class="op">{</span>
<span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">router</span><span class="op">:</span> Router) <span class="op">{</span> <span class="op">}</span>
  <span class="at">onNavigate</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">router</span>.<span class="at">navigate</span>([<span class="st">&#39;/&#39;</span>])<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="parámetros-i" class="slide level2">
<h2><span class="header-section-number">13.20</span> Parámetros (I)</h2>
<ul>
<li><p>Las rutas se pueden personalizar un poco mas. De momento al ir a la página de <strong>/usuario</strong> nos muestra los datos de un solo usuario, pero en todas las aplicaciones hay mas de un usuario por lo que tenemos que indicar en la URL la página del usuario que queremos ver.</p></li>
<li><p>Esto se indica con los parámetros de las rutas que pueden contener un valor. Estos párametros se definen de la siguiente forma <strong>{ path: 'usuario/:id', component: UsuarioComponent }</strong>.</p></li>
</ul>
</section><section id="parámetros-ii" class="slide level2">
<h2><span class="header-section-number">13.21</span> Parámetros (II)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes<span class="op">,</span> RouterModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>

<span class="kw">const</span> APP\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;usuario/:id&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioComponent<span class="op">},</span>
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> HomeComponent<span class="op">}</span>
]<span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> routing <span class="op">=</span> <span class="va">RouterModule</span>.<span class="at">forRoot</span>(APP\_ROUTES)<span class="op">;</span></code></pre></div>
</section><section id="parámetros-iii" class="slide level2">
<h2><span class="header-section-number">13.22</span> Parámetros (III)</h2>
<ul>
<li>Y ahora en los links donde se llama al usuario hay que añadir un segundo segmento que es el id de ese usuario.</li>
</ul>
</section><section id="parámetros-iv" class="slide level2">
<h2><span class="header-section-number">13.23</span> Parámetros (IV)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;container&quot;</span><span class="op">&gt;</span>
  <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="op">&gt;</span>
    <span class="op">&lt;</span>div <span class="kw">class</span><span class="op">=</span><span class="st">&quot;col-md-10&quot;</span><span class="op">&gt;</span>
      <span class="op">&lt;</span>h1<span class="op">&gt;</span>Hello World<span class="op">!&lt;</span><span class="ss">/h1&gt;</span>
<span class="ss">      &lt;hr&gt;</span>
<span class="ss">      &lt;a </span><span class="sc">[routerLink]</span><span class="ss">=&quot;</span><span class="sc">[&#39;&#39;]</span><span class="ss">&quot;&gt;Home&lt;/a</span><span class="op">&gt;</span> <span class="op">|</span>
      <span class="op">&lt;</span>input type<span class="op">=</span><span class="st">&quot;text&quot;</span> #<span class="at">id</span> (input)<span class="op">=</span><span class="st">&quot;0&quot;</span> <span class="ss">/&gt;</span>
<span class="ss">      &lt;a </span><span class="sc">[routerLink]</span><span class="ss">=&quot;</span><span class="sc">[&#39;usuario&#39;, id.value]</span><span class="ss">&quot;&gt;Usuario&lt;/a</span><span class="op">&gt;</span>
      <span class="op">&lt;</span>hr<span class="op">&gt;</span>
      <span class="op">&lt;</span>router<span class="op">-</span>outlet<span class="op">&gt;&lt;</span><span class="ss">/router-outlet&gt;</span>
<span class="ss">    &lt;/div</span><span class="op">&gt;</span>
  <span class="op">&lt;</span><span class="ss">/div&gt;</span>
<span class="ss">&lt;/div</span><span class="op">&gt;</span></code></pre></div>
</section><section id="parámetros-v" class="slide level2">
<h2><span class="header-section-number">13.24</span> Parámetros (V)</h2>
<ul>
<li><p>Para obtener los parámetros de una URL, hay que importar <strong>ActivatedRoute</strong> de <strong><span class="citation" data-cites="angular/router">@angular/router</span></strong> e inyectarlo en el constructor.</p></li>
<li><p>Y podemos acceder a ellos como viene a continuación:</p></li>
</ul>
</section><section id="parámetros-vi" class="slide level2">
<h2><span class="header-section-number">13.25</span> Parámetros (VI)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Router<span class="op">,</span> ActivatedRoute <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-usuario&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h3&gt;Usuario&lt;/h3&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onNavigate()&quot;&gt;Ir a inicio&lt;/button&gt;</span>
<span class="vs">    &lt;hr&gt;{{id}}&lt;hr&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> UsuarioComponent <span class="op">{</span>
  <span class="dt">id</span><span class="op">:</span> string<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">router</span><span class="op">:</span> Router<span class="op">,</span> <span class="kw">private</span> <span class="dt">activatedRoute</span><span class="op">:</span> ActivatedRoute) <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">id</span> <span class="op">=</span> <span class="va">activatedRoute</span>.<span class="va">snapshot</span>.<span class="at">params</span>[<span class="st">&#39;id&#39;</span>]<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">onNavigate</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">router</span>.<span class="at">navigate</span>([<span class="st">&#39;/&#39;</span>])<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="parámetros-vii" class="slide level2">
<h2><span class="header-section-number">13.26</span> Parámetros (VII)</h2>
<ul>
<li><p>El método <strong>snapshot.params['id']</strong> nos da un objeto de clave-valor en el que el id es una clave y lo usamos para obtener su valor.</p></li>
<li><p>Pero si le cambiamos el id en el input para que nos mande al componente correspondiente con ese id se puede observar que en la URL se ha cambiado el id, pero el componente no se ha cargado.</p></li>
<li><p>Angular es muy eficiente y si detecta que queremos ir al mismo componente, no lo destruye para volverlo a crear, sino que realiza los cambios que detecta.</p></li>
</ul>
</section><section id="parámetros-viii" class="slide level2">
<h2><span class="header-section-number">13.27</span> Parámetros (VIII)</h2>
<ul>
<li><p>Pero como no esta creando el componente otra vez, no detecta el cambio del id y no lanza el constructor otra vez para actualizar el componente.</p></li>
<li><p>La alternativa que hay que usar a snapshot es <strong>params</strong>, que es un observable.</p></li>
<li><p>Un observable envuelve un objeto y escucha los cambios que se producen en dicho objeto para poder reaccionar a ellos.</p></li>
</ul>
</section><section id="parámetros-ix" class="slide level2">
<h2><span class="header-section-number">13.28</span> Parámetros (IX)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component<span class="op">,</span> OnDestroy <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Router<span class="op">,</span> ActivatedRoute <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Subscription <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;rxjs/Rx&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-usuario&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h3&gt;Usuario&lt;/h3&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onNavigate()&quot;&gt;Ir a inicio&lt;/button&gt;</span>
<span class="vs">    &lt;hr&gt;{{id}}&lt;hr&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> UsuarioComponent <span class="kw">implements</span> OnDestroy <span class="op">{</span>
  <span class="kw">private</span> <span class="dt">subscription</span><span class="op">:</span> Subscription<span class="op">;</span>
  <span class="dt">id</span><span class="op">:</span> string<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">router</span><span class="op">:</span> Router<span class="op">,</span> <span class="kw">private</span> <span class="dt">activatedRoute</span><span class="op">:</span> ActivatedRoute) <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">subscription</span> <span class="op">=</span> <span class="va">activatedRoute</span>.<span class="va">params</span>.<span class="at">subscribe</span>(
      (<span class="dt">param</span><span class="op">:</span> any) <span class="op">=&gt;</span> <span class="kw">this</span>.<span class="at">id</span> <span class="op">=</span> param[<span class="st">&#39;id&#39;</span>]
    )<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">onNavigate</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">router</span>.<span class="at">navigate</span>([<span class="st">&#39;/&#39;</span>])<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">ngOnDestroy</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">subscription</span>.<span class="at">unsubscribe</span>()<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="parámetros-x" class="slide level2">
<h2><span class="header-section-number">13.29</span> Parámetros (X)</h2>
<ul>
<li><p>Ahora se subscribe a cualquier cambio en los parámetros, y en el momento en que se produzca, ejecuta el callback pasandole como parámetro el param del que se puede obtener el valor del id.</p></li>
<li><p>La subscripcion la guardamos en una variable de tipo <strong>Subscription</strong> que se importa desde <strong>rxjs/Rx</strong> y de la que vamos a desubscribirnos una vez que se elimine el componente para evitar perdidas de memoria.</p></li>
</ul>
</section><section id="rutas-hijas-i" class="slide level2">
<h2><span class="header-section-number">13.30</span> Rutas hijas (I)</h2>
<ul>
<li><p>Las rutas hijas son aquellas que dependen de los parámetros de una ruta, hasta ahora teniamos la ruta <strong>usuario/:id</strong>, pero ahora queremos una ruta que permita editar ese usuario por lo que necesitaremos una ruta del estilo <strong>usuario/:id/editar</strong>.</p></li>
<li><p>Esta es una child route porque cuelga de la ruta del usuario y depende del id.</p></li>
</ul>
</section><section id="rutas-hijas-ii" class="slide level2">
<h2><span class="header-section-number">13.31</span> Rutas hijas (II)</h2>
<ul>
<li><p>Para crear estas rutas hay que crearse otro archivo de rutas en este caso en la carpeta de <strong>usuario</strong>.</p></li>
<li><p>Y las rutas definidas en este archivo hay que exportarlas para importarlas y usarlas en el archivo de rutas principal.</p></li>
</ul>
</section><section id="rutas-hijas-iii" class="slide level2">
<h2><span class="header-section-number">13.32</span> Rutas hijas (III)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./editar-usuario.component&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> USUARIO\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioInfoComponent <span class="op">},</span>
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;editar&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> EditarUsuarioComponent <span class="op">}</span>
]<span class="op">;</span></code></pre></div>
</section><section id="rutas-hijas-iv" class="slide level2">
<h2><span class="header-section-number">13.33</span> Rutas hijas (IV)</h2>
<ul>
<li>En el archivo <strong>app.routing.ts</strong> además de importar las rutas, hay que asignarselas a la ruta de la que van a depender.</li>
</ul>
</section><section id="rutas-hijas-v" class="slide level2">
<h2><span class="header-section-number">13.34</span> Rutas hijas (V)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes<span class="op">,</span> RouterModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> USUARIO\_ROUTES <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.routing&#39;</span><span class="op">;</span>

<span class="kw">const</span> APP\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;usuario/:id&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioComponent<span class="op">,</span> <span class="dt">children</span><span class="op">:</span> USUARIO\_ROUTES <span class="op">},</span>
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> HomeComponent<span class="op">}</span>
]<span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> routing <span class="op">=</span> <span class="va">RouterModule</span>.<span class="at">forRoot</span>(APP\_ROUTES)<span class="op">;</span></code></pre></div>
</section><section id="rutas-hijas-vi" class="slide level2">
<h2><span class="header-section-number">13.35</span> Rutas hijas (VI)</h2>
<ul>
<li>Para que funcione, hay que indicar donde se quiere renderizar el componente hijo con la etiqueta <strong>router-outlet</strong>. Y también tendremos que añadir los enlaces a los componente hijos.</li>
</ul>
</section><section id="rutas-hijas-vii" class="slide level2">
<h2><span class="header-section-number">13.36</span> Rutas hijas (VII)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component<span class="op">,</span> OnDestroy <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Router<span class="op">,</span> ActivatedRoute <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Subscription <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;rxjs/Rx&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-usuario&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h3&gt;Usuario&lt;/h3&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onNavigate()&quot;&gt;Ir a inicio&lt;/button&gt;</span>
<span class="vs">    &lt;hr&gt;{{id}}&lt;hr&gt;</span>
<span class="vs">    &lt;a [routerLink]=&quot;[&#39;editar&#39;]&quot;&gt;Editar usuario&lt;/a&gt;</span>
<span class="vs">    &lt;a [routerLink]=&quot;[&#39;info&#39;]&quot;&gt;Info de usuario&lt;/a&gt;</span>
<span class="vs">    &lt;router-outlet&gt;&lt;/router-outlet&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> UsuarioComponent <span class="kw">implements</span> OnDestroy <span class="op">{</span>
  <span class="kw">private</span> <span class="dt">subscription</span><span class="op">:</span> Subscription<span class="op">;</span>
  <span class="dt">id</span><span class="op">:</span> string<span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">router</span><span class="op">:</span> Router<span class="op">,</span> <span class="kw">private</span> <span class="dt">activatedRoute</span><span class="op">:</span> ActivatedRoute) <span class="op">{</span>
    <span class="kw">this</span>.<span class="at">subscription</span> <span class="op">=</span> <span class="va">activatedRoute</span>.<span class="va">params</span>.<span class="at">subscribe</span>(
      (<span class="dt">param</span><span class="op">:</span> any) <span class="op">=&gt;</span> <span class="kw">this</span>.<span class="at">id</span> <span class="op">=</span> param[<span class="st">&#39;id&#39;</span>]
    )<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">onNavigate</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">router</span>.<span class="at">navigate</span>([<span class="st">&#39;/&#39;</span>])<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">ngOnDestroy</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">subscription</span>.<span class="at">unsubscribe</span>()<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="rutas-hijas-viii" class="slide level2">
<h2><span class="header-section-number">13.37</span> Rutas hijas (VIII)</h2>
<ul>
<li>En el caso de que no se inserte un id, la URL no sería correcta, porque siempre tiene que recibir un id. En este caso, cuando no lo reciba hay que redireccionarla a una URL válida.</li>
</ul>
</section><section id="rutas-hijas-ix" class="slide level2">
<h2><span class="header-section-number">13.38</span> Rutas hijas (IX)</h2>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes<span class="op">,</span> RouterModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> USUARIO\_ROUTES <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.routing&#39;</span><span class="op">;</span>

<span class="kw">const</span> APP\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;usuario/&#39;</span><span class="op">,</span> <span class="dt">redirectTo</span><span class="op">:</span> <span class="st">&#39;usuario/1&#39;</span><span class="op">},</span>
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;usuario/:id&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioComponent<span class="op">,</span> <span class="dt">children</span><span class="op">:</span> USUARIO\_ROUTES <span class="op">},</span>
  <span class="op">{</span><span class="dt">path</span><span class="op">:</span> <span class="st">&#39;&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> HomeComponent<span class="op">}</span>
]<span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> routing <span class="op">=</span> <span class="va">RouterModule</span>.<span class="at">forRoot</span>(APP\_ROUTES)<span class="op">;</span></code></pre></div>
</section><section id="guards" class="slide level2">
<h2><span class="header-section-number">13.39</span> Guards</h2>
<ul>
<li><p>Las guards se usan para controlar a que partes de la aplicación puede navegar un usuario.</p></li>
<li><p>Por ejemplo, es posible que algunas de las rutas de la aplicación las queramos restringir solo a usuarios logueados, y podemos usar estas guards para controlar las condiciones en las que pueden o no entrar o salir de una ruta.</p></li>
</ul>
</section><section id="canactivate-i" class="slide level2">
<h2><span class="header-section-number">13.40</span> CanActivate (I)</h2>
<ul>
<li><p>Este guard se ejecuta al entrar en una ruta.</p></li>
<li><p>El guard que se ha creado implementa la interface CanActivate la cual tiene dos parámetros, donde el primero es la ruta que está activada, y el segundo es el estado de esa ruta.</p></li>
</ul>
</section><section id="canactivate-ii" class="slide level2">
<h2><span class="header-section-number">13.41</span> CanActivate (II)</h2>
<ul>
<li><p>Este método devolverá un Observable, una Promise o un boolean.</p></li>
<li><p>Si el valor devuelto es <strong>true</strong> permite pasar a la ruta, mientras que si es <strong>false</strong> no.</p></li>
<li><p>El observable se usa cuando el valor depende de que algo se ejecute asíncronamente y tengamos que esperar a la respuesta.</p></li>
</ul>
</section><section id="canactivate-iii" class="slide level2">
<h2><span class="header-section-number">13.42</span> CanActivate (III)</h2>
<ul>
<li><strong>usuario-info.guard.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Injectable <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> CanActivate<span class="op">,</span> ActivatedRouteSnapshot<span class="op">,</span> RouterStateSnapshot <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Observable <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;rxjs/Observable&#39;</span><span class="op">;</span>

@<span class="at">Injectable</span>()
<span class="im">export</span> <span class="kw">class</span> UsuarioInfoGuard <span class="kw">implements</span> CanActivate <span class="op">{</span>
  <span class="at">canActivate</span>(<span class="dt">next</span><span class="op">:</span> ActivatedRouteSnapshot<span class="op">,</span> <span class="dt">state</span><span class="op">:</span> RouterStateSnapshot)<span class="op">:</span> 
    Observable<span class="op">&lt;</span>boolean<span class="op">&gt;</span> <span class="op">|</span> Promise<span class="op">&lt;</span>boolean<span class="op">&gt;</span> <span class="op">|</span> boolean <span class="op">{</span>
    <span class="cf">return</span> <span class="at">confirm</span>(<span class="st">&#39;Estas seguro??&#39;</span>)<span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="canactivate-iv" class="slide level2">
<h2><span class="header-section-number">13.43</span> CanActivate (IV)</h2>
<ul>
<li>Para asignar el <strong>guard</strong> a una ruta, hay que poner en la ruta la clave <strong>canActivate</strong> cuyo valor será un array con todas las guards que tiene que pasar esa ruta.</li>
</ul>
</section><section id="canactivate-v" class="slide level2">
<h2><span class="header-section-number">13.44</span> CanActivate (V)</h2>
<ul>
<li><strong>usuario.routing.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./editar-usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario-info.guard&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> USUARIO\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioInfoComponent<span class="op">,</span> <span class="dt">canActivate</span><span class="op">:</span> [UsuarioInfoGuard] <span class="op">},</span>
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;editar&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> EditarUsuarioComponent <span class="op">}</span>
]<span class="op">;</span></code></pre></div>
</section><section id="canactivate-vi" class="slide level2">
<h2><span class="header-section-number">13.45</span> CanActivate (VI)</h2>
<ul>
<li>Ahora solo faltaría añadir el guard en el array de <strong>providers</strong> del <strong>app.module.ts</strong> para que funcione.</li>
</ul>
</section><section id="canactivate-vii" class="slide level2">
<h2><span class="header-section-number">13.46</span> CanActivate (VII)</h2>
<ul>
<li><strong>app.module.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> BrowserModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> NgModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> FormsModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HttpModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/http&#39;</span><span class="op">;</span>

<span class="im">import</span> <span class="op">{</span> AppComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/editar-usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> routing <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.routing&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario-info.guard&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    AppComponent<span class="op">,</span>
    UsuarioComponent<span class="op">,</span>
    EditarUsuarioComponent<span class="op">,</span>
    UsuarioInfoComponent<span class="op">,</span>
    HomeComponent
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    BrowserModule<span class="op">,</span>
    FormsModule<span class="op">,</span>
    HttpModule<span class="op">,</span>
    routing
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [UsuarioInfoGuard]<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="candeactivate-i" class="slide level2">
<h2><span class="header-section-number">13.47</span> CanDeactivate (I)</h2>
<ul>
<li><p>Este guard se lanza cuando te vas a salir de una cierta ruta.</p></li>
<li><p>Es parecido al anterior, pero hay que tener en cuenta algunas cosas.</p></li>
<li><p>Para empezar al crear el guard, hay que importar el CanDeactivate e implementarlo en la clase.</p></li>
</ul>
</section><section id="candeactivate-ii" class="slide level2">
<h2><span class="header-section-number">13.48</span> CanDeactivate (II)</h2>
<ul>
<li><p>Este CanDeactivate tiene como parámetro un interface que se va a implementar en los componentes que necesiten usar esta guard.</p></li>
<li><p>Hay que definir el interface en este mismo archivo, el cual no tiene ningún parámetro y devuelve al igual que el guard, un Observable o un boolean.</p></li>
</ul>
</section><section id="candeactivate-iii" class="slide level2">
<h2><span class="header-section-number">13.49</span> CanDeactivate (III)</h2>
<ul>
<li><strong>editar-usuario.guard.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> CanDeactivate <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Observable <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;rxjs/Observable&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">interface</span> ComponentCanDeactivate <span class="op">{</span>
  <span class="dt">canDeactivate</span><span class="op">:</span> () ⇒ Observable<span class="op">&lt;</span>boolean<span class="op">&gt;</span> <span class="op">|</span> boolean<span class="op">;</span>
<span class="op">}</span>

<span class="im">export</span> <span class="kw">class</span> EditarUsuarioGuard <span class="kw">implements</span> CanDeactivate<span class="op">&lt;</span>ComponentCanDeactivate<span class="op">&gt;</span> <span class="op">{</span>
  <span class="at">canDeactivate</span>(<span class="dt">component</span><span class="op">:</span> ComponentCanDeactivate)<span class="op">:</span> Observable<span class="op">&lt;</span>boolean<span class="op">&gt;</span> <span class="op">|</span> boolean <span class="op">{</span>
    <span class="cf">return</span> <span class="va">component</span>.<span class="at">canDeactivate</span> <span class="op">?</span> <span class="va">component</span>.<span class="at">canDeactivate</span>() : <span class="kw">true</span><span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="candeactivate-iv" class="slide level2">
<h2><span class="header-section-number">13.50</span> CanDeactivate (IV)</h2>
<ul>
<li><p>En el canDeactivate de la clase del guard, se le indica que si el componente tiene implementado el interface de arriba nos deje salir según el valor que devuelva ese método, y si no lo tiene implementado entonces permite salir siempre.</p></li>
<li><p>Una vez definido el interface, hay que implementarlo en el componente.</p></li>
</ul>
</section><section id="candeactivate-vi" class="slide level2">
<h2><span class="header-section-number">13.51</span> CanDeactivate (VI)</h2>
<ul>
<li><strong>editar-usuario.component.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Component <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Router <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> Observable <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;rxjs/Rx&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> ComponentCanDeactivate <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./editar-usuario.guard&#39;</span><span class="op">;</span>

@<span class="at">Component</span>(<span class="op">{</span>
  <span class="dt">selector</span><span class="op">:</span> <span class="st">&#39;app-editar-usuario&#39;</span><span class="op">,</span>
  <span class="dt">template</span><span class="op">:</span> <span class="vs">`&lt;h3&gt;Editar Usuario&lt;/h3&gt;</span>
<span class="vs">    &lt;button (click)=&quot;hecho=true&quot;&gt;Hecho&lt;/button&gt;</span>
<span class="vs">    &lt;button (click)=&quot;onNavigate()&quot;&gt;Ir a inicio&lt;/button&gt;`</span><span class="op">,</span>
  <span class="dt">styles</span><span class="op">:</span> []
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> EditarUsuarioComponent <span class="op">{</span>
  <span class="dt">hecho</span><span class="op">:</span> boolean <span class="op">=</span> <span class="kw">false</span><span class="op">;</span>
  <span class="at">constructor</span>(<span class="kw">private</span> <span class="dt">router</span><span class="op">:</span> Router) <span class="op">{</span> <span class="op">}</span>
  <span class="at">onNavigate</span>() <span class="op">{</span>
    <span class="kw">this</span>.<span class="va">router</span>.<span class="at">navigate</span>([<span class="st">&#39;/&#39;</span>])<span class="op">;</span>
  <span class="op">}</span>
  <span class="at">canDeactivate</span>()<span class="op">:</span> Observable<span class="op">&lt;</span>boolean<span class="op">&gt;</span> <span class="op">|</span> boolean <span class="op">{</span>
    <span class="cf">if</span>(<span class="op">!</span><span class="kw">this</span>.<span class="at">hecho</span>) <span class="op">{</span>
      <span class="cf">return</span> <span class="at">confirm</span>(<span class="st">&#39;Seguro que quieres salir??&#39;</span>)<span class="op">;</span>
    <span class="op">}</span>
    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span>
  <span class="op">}</span>
<span class="op">}</span></code></pre></div>
</section><section id="candeactivate-vii" class="slide level2">
<h2><span class="header-section-number">13.52</span> CanDeactivate (VII)</h2>
<ul>
<li>No hay que olvidar añadir el guard en el array de providers del archivo <strong>app.module.ts</strong>.</li>
</ul>
</section><section id="candeactivate-viii" class="slide level2">
<h2><span class="header-section-number">13.53</span> CanDeactivate (VIII)</h2>
<ul>
<li><strong>app.module.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> BrowserModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/platform-browser&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> NgModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/core&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> FormsModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/forms&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HttpModule <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/http&#39;</span><span class="op">;</span>

<span class="im">import</span> <span class="op">{</span> AppComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/editar-usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> HomeComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./home.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> routing <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./app.routing&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/usuario-info.guard&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario/editar-usuario.guard&#39;</span><span class="op">;</span>

@<span class="at">NgModule</span>(<span class="op">{</span>
  <span class="dt">declarations</span><span class="op">:</span> [
    AppComponent<span class="op">,</span>
    UsuarioComponent<span class="op">,</span>
    EditarUsuarioComponent<span class="op">,</span>
    UsuarioInfoComponent<span class="op">,</span>
    HomeComponent
  ]<span class="op">,</span>
  <span class="dt">imports</span><span class="op">:</span> [
    BrowserModule<span class="op">,</span>
    FormsModule<span class="op">,</span>
    HttpModule<span class="op">,</span>
    routing
  ]<span class="op">,</span>
  <span class="dt">providers</span><span class="op">:</span> [UsuarioInfoGuard<span class="op">,</span> EditarUsuarioGuard]<span class="op">,</span>
  <span class="dt">bootstrap</span><span class="op">:</span> [AppComponent]
<span class="op">}</span>)
<span class="im">export</span> <span class="kw">class</span> AppModule <span class="op">{</span> <span class="op">}</span></code></pre></div>
</section><section id="candeactivate-ix" class="slide level2">
<h2><span class="header-section-number">13.54</span> CanDeactivate (IX)</h2>
<ul>
<li>Y por último se añade a la ruta correspondiente con la clave canDeactivate que tiene por valor un array de guards en el que hay que incluir esta que se ha creado.</li>
</ul>
</section><section id="candeactivate-x" class="slide level2">
<h2><span class="header-section-number">13.55</span> CanDeactivate (X)</h2>
<ul>
<li><strong>usuario.routing.ts.</strong></li>
</ul>
<div class="sourceCode"><pre class="sourceCode javascript"><code class="sourceCode javascript"><span class="im">import</span> <span class="op">{</span> Routes <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;@angular/router&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario-info.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioComponent <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./editar-usuario.component&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> UsuarioInfoGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./usuario-info.guard&#39;</span><span class="op">;</span>
<span class="im">import</span> <span class="op">{</span> EditarUsuarioGuard <span class="op">}</span> <span class="im">from</span> <span class="st">&#39;./editar-usuario.guard&#39;</span><span class="op">;</span>

<span class="im">export</span> <span class="kw">const</span> USUARIO\_ROUTES<span class="op">:</span> Routes <span class="op">=</span> [
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;info&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> UsuarioInfoComponent<span class="op">,</span> <span class="dt">canActivate</span><span class="op">:</span> [UsuarioInfoGuard] <span class="op">},</span>
  <span class="op">{</span> <span class="dt">path</span><span class="op">:</span> <span class="st">&#39;editar&#39;</span><span class="op">,</span> <span class="dt">component</span><span class="op">:</span> EditarUsuarioComponent<span class="op">,</span> <span class="dt">canDeactivate</span><span class="op">:</span> [EditarUsuarioGuard] <span class="op">}</span>
]<span class="op">;</span></code></pre></div>
</section></section>
    </div>
  </div>

  <script src="../lib/reveal.js/lib/js/head.min.js"></script>
  <script src="../lib/reveal.js/js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        pdfMaxPagesPerSlide: 1,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1024,
        height: 576,
        // Factor of the display size that should remain empty around the content
        margin: 0.3,
        // Bounds for smallest/largest possible scale to apply to content
        minScale: 0.1,
        maxScale: 1.9,

        menu: {
            // Specifies which side of the presentation the menu will
            // be shown. Use 'left' or 'right'.
            side: 'left',

            // Add slide numbers to the titles in the slide list.
            // Use 'true' or format string (same as reveal.js slide numbers)
            numbers: false,

            // Specifies which slide elements will be used for generating
            // the slide titles in the menu. The default selects the first
            // heading element found in the slide, but you can specify any
            // valid css selector and the text from the first matching
            // element will be used.
            // Note: that a section data-menu-title attribute or an element
            // with a menu-title class will take precedence over this option
            titleSelector: 'h1, h2, h3, h4, h5, h6',

            // Hide slides from the menu that do not have a title.
            // Set to 'true' to only list slides with titles.
            hideMissingTitles: false,

            // Add markers to the slide titles to indicate the
            // progress through the presentation
            markers: false,

            // Specify custom panels to be included in the menu, by
            // providing an array of objects with 'title', 'icon'
            // properties, and either a 'src' or 'content' property.
            custom: false,

            // Specifies the themes that will be available in the themes
            // menu panel. Set to 'false' to hide themes panel.
            themes: [
                { name: 'Black', theme: '../lib/reveal.js/css/theme/black.css' },
                { name: 'White', theme: '../lib/reveal.js/css/theme/white.css' },
                { name: 'League', theme: '../lib/reveal.js/css/theme/league.css' },
                { name: 'Sky', theme: '../lib/reveal.js/css/theme/sky.css' },
                { name: 'Beige', theme: '../lib/reveal.js/css/theme/beige.css' },
                { name: 'Simple', theme: '../lib/reveal.js/css/theme/simple.css' },
                { name: 'Serif', theme: '../lib/reveal.js/css/theme/serif.css' },
                { name: 'Blood', theme: '../lib/reveal.js/css/theme/blood.css' },
                { name: 'Night', theme: '../lib/reveal.js/css/theme/night.css' },
                { name: 'Moon', theme: '../lib/reveal.js/css/theme/moon.css' },
                { name: 'Solarized', theme: '../lib/reveal.js/css/theme/solarized.css' }
            ],

            // Specifies if the transitions menu panel will be shown.
            transitions: true,

            // Adds a menu button to the slides to open the menu panel.
            // Set to 'false' to hide the button.
            openButton: true,

            // If 'true' allows the slide number in the presentation to
            // open the menu panel. The reveal.js slideNumber option must
            // be displayed for this to take effect
            openSlideNumber: false,

            // If true allows the user to open and navigate the menu using
            // the keyboard. Standard keyboard interaction with reveal
            // will be disabled while the menu is open.
            keyboard: true
        },

        // Optional reveal.js plugins
        dependencies: [
          { src: '../lib/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../lib/reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: '../lib/reveal.js/plugin/notes/notes.js', async: true },
          //{ src: '../lib/reveal.js/plugin/search/search.js', async: true },
          { src: '../lib/reveal.js-menu/menu.js', async: true }
        ]
      });
    </script>
    </body>
</html>
